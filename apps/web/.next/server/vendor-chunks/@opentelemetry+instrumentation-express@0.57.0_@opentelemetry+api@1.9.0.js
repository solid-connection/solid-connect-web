"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0";
exports.ids = ["vendor-chunks/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0"];
exports.modules = {

/***/ "(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/enums/AttributeNames.js":
/*!*********************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/enums/AttributeNames.js ***!
  \*********************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.AttributeNames = void 0;\n/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar AttributeNames;\n(function (AttributeNames) {\n    AttributeNames[\"EXPRESS_TYPE\"] = \"express.type\";\n    AttributeNames[\"EXPRESS_NAME\"] = \"express.name\";\n})(AttributeNames = exports.AttributeNames || (exports.AttributeNames = {}));\n//# sourceMappingURL=AttributeNames.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVudGVsZW1ldHJ5K2luc3RydW1lbnRhdGlvbi1leHByZXNzQDAuNTcuMF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjAvbm9kZV9tb2R1bGVzL0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzL2J1aWxkL3NyYy9lbnVtcy9BdHRyaWJ1dGVOYW1lcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDhDQUE4QyxzQkFBc0IsS0FBSztBQUMxRSIsInNvdXJjZXMiOlsid2VicGFjazovL0Bzb2xpZC1jb25uZWN0L3dlYi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW50ZWxlbWV0cnkraW5zdHJ1bWVudGF0aW9uLWV4cHJlc3NAMC41Ny4wX0BvcGVudGVsZW1ldHJ5K2FwaUAxLjkuMC9ub2RlX21vZHVsZXMvQG9wZW50ZWxlbWV0cnkvaW5zdHJ1bWVudGF0aW9uLWV4cHJlc3MvYnVpbGQvc3JjL2VudW1zL0F0dHJpYnV0ZU5hbWVzLmpzPzg4ODUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkF0dHJpYnV0ZU5hbWVzID0gdm9pZCAwO1xuLypcbiAqIENvcHlyaWdodCBUaGUgT3BlblRlbGVtZXRyeSBBdXRob3JzXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbnZhciBBdHRyaWJ1dGVOYW1lcztcbihmdW5jdGlvbiAoQXR0cmlidXRlTmFtZXMpIHtcbiAgICBBdHRyaWJ1dGVOYW1lc1tcIkVYUFJFU1NfVFlQRVwiXSA9IFwiZXhwcmVzcy50eXBlXCI7XG4gICAgQXR0cmlidXRlTmFtZXNbXCJFWFBSRVNTX05BTUVcIl0gPSBcImV4cHJlc3MubmFtZVwiO1xufSkoQXR0cmlidXRlTmFtZXMgPSBleHBvcnRzLkF0dHJpYnV0ZU5hbWVzIHx8IChleHBvcnRzLkF0dHJpYnV0ZU5hbWVzID0ge30pKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUF0dHJpYnV0ZU5hbWVzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/enums/AttributeNames.js\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/enums/ExpressLayerType.js":
/*!***********************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/enums/ExpressLayerType.js ***!
  \***********************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ExpressLayerType = void 0;\n/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar ExpressLayerType;\n(function (ExpressLayerType) {\n    ExpressLayerType[\"ROUTER\"] = \"router\";\n    ExpressLayerType[\"MIDDLEWARE\"] = \"middleware\";\n    ExpressLayerType[\"REQUEST_HANDLER\"] = \"request_handler\";\n})(ExpressLayerType = exports.ExpressLayerType || (exports.ExpressLayerType = {}));\n//# sourceMappingURL=ExpressLayerType.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVudGVsZW1ldHJ5K2luc3RydW1lbnRhdGlvbi1leHByZXNzQDAuNTcuMF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjAvbm9kZV9tb2R1bGVzL0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzL2J1aWxkL3NyYy9lbnVtcy9FeHByZXNzTGF5ZXJUeXBlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxrREFBa0Qsd0JBQXdCLEtBQUs7QUFDaEYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Ac29saWQtY29ubmVjdC93ZWIvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVudGVsZW1ldHJ5K2luc3RydW1lbnRhdGlvbi1leHByZXNzQDAuNTcuMF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjAvbm9kZV9tb2R1bGVzL0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzL2J1aWxkL3NyYy9lbnVtcy9FeHByZXNzTGF5ZXJUeXBlLmpzPzg2ZWUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkV4cHJlc3NMYXllclR5cGUgPSB2b2lkIDA7XG4vKlxuICogQ29weXJpZ2h0IFRoZSBPcGVuVGVsZW1ldHJ5IEF1dGhvcnNcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwczovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIEV4cHJlc3NMYXllclR5cGU7XG4oZnVuY3Rpb24gKEV4cHJlc3NMYXllclR5cGUpIHtcbiAgICBFeHByZXNzTGF5ZXJUeXBlW1wiUk9VVEVSXCJdID0gXCJyb3V0ZXJcIjtcbiAgICBFeHByZXNzTGF5ZXJUeXBlW1wiTUlERExFV0FSRVwiXSA9IFwibWlkZGxld2FyZVwiO1xuICAgIEV4cHJlc3NMYXllclR5cGVbXCJSRVFVRVNUX0hBTkRMRVJcIl0gPSBcInJlcXVlc3RfaGFuZGxlclwiO1xufSkoRXhwcmVzc0xheWVyVHlwZSA9IGV4cG9ydHMuRXhwcmVzc0xheWVyVHlwZSB8fCAoZXhwb3J0cy5FeHByZXNzTGF5ZXJUeXBlID0ge30pKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV4cHJlc3NMYXllclR5cGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/enums/ExpressLayerType.js\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/index.js":
/*!******************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/index.js ***!
  \******************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.AttributeNames = exports.ExpressLayerType = exports.ExpressInstrumentation = void 0;\nvar instrumentation_1 = __webpack_require__(/*! ./instrumentation */ \"(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/instrumentation.js\");\nObject.defineProperty(exports, \"ExpressInstrumentation\", ({ enumerable: true, get: function () { return instrumentation_1.ExpressInstrumentation; } }));\nvar ExpressLayerType_1 = __webpack_require__(/*! ./enums/ExpressLayerType */ \"(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/enums/ExpressLayerType.js\");\nObject.defineProperty(exports, \"ExpressLayerType\", ({ enumerable: true, get: function () { return ExpressLayerType_1.ExpressLayerType; } }));\nvar AttributeNames_1 = __webpack_require__(/*! ./enums/AttributeNames */ \"(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/enums/AttributeNames.js\");\nObject.defineProperty(exports, \"AttributeNames\", ({ enumerable: true, get: function () { return AttributeNames_1.AttributeNames; } }));\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVudGVsZW1ldHJ5K2luc3RydW1lbnRhdGlvbi1leHByZXNzQDAuNTcuMF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjAvbm9kZV9tb2R1bGVzL0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzL2J1aWxkL3NyYy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxzQkFBc0IsR0FBRyx3QkFBd0IsR0FBRyw4QkFBOEI7QUFDbEYsd0JBQXdCLG1CQUFPLENBQUMsaU5BQW1CO0FBQ25ELDBEQUF5RCxFQUFFLHFDQUFxQyxvREFBb0QsRUFBQztBQUNySix5QkFBeUIsbUJBQU8sQ0FBQywrTkFBMEI7QUFDM0Qsb0RBQW1ELEVBQUUscUNBQXFDLCtDQUErQyxFQUFDO0FBQzFJLHVCQUF1QixtQkFBTyxDQUFDLDJOQUF3QjtBQUN2RCxrREFBaUQsRUFBRSxxQ0FBcUMsMkNBQTJDLEVBQUM7QUFDcEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Ac29saWQtY29ubmVjdC93ZWIvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVudGVsZW1ldHJ5K2luc3RydW1lbnRhdGlvbi1leHByZXNzQDAuNTcuMF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjAvbm9kZV9tb2R1bGVzL0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzL2J1aWxkL3NyYy9pbmRleC5qcz82MDRhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLypcbiAqIENvcHlyaWdodCBUaGUgT3BlblRlbGVtZXRyeSBBdXRob3JzXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQXR0cmlidXRlTmFtZXMgPSBleHBvcnRzLkV4cHJlc3NMYXllclR5cGUgPSBleHBvcnRzLkV4cHJlc3NJbnN0cnVtZW50YXRpb24gPSB2b2lkIDA7XG52YXIgaW5zdHJ1bWVudGF0aW9uXzEgPSByZXF1aXJlKFwiLi9pbnN0cnVtZW50YXRpb25cIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJFeHByZXNzSW5zdHJ1bWVudGF0aW9uXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBpbnN0cnVtZW50YXRpb25fMS5FeHByZXNzSW5zdHJ1bWVudGF0aW9uOyB9IH0pO1xudmFyIEV4cHJlc3NMYXllclR5cGVfMSA9IHJlcXVpcmUoXCIuL2VudW1zL0V4cHJlc3NMYXllclR5cGVcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJFeHByZXNzTGF5ZXJUeXBlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBFeHByZXNzTGF5ZXJUeXBlXzEuRXhwcmVzc0xheWVyVHlwZTsgfSB9KTtcbnZhciBBdHRyaWJ1dGVOYW1lc18xID0gcmVxdWlyZShcIi4vZW51bXMvQXR0cmlidXRlTmFtZXNcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJBdHRyaWJ1dGVOYW1lc1wiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gQXR0cmlidXRlTmFtZXNfMS5BdHRyaWJ1dGVOYW1lczsgfSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/index.js\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/internal-types.js":
/*!***************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/internal-types.js ***!
  \***************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports._LAYERS_STORE_PROPERTY = exports.kLayerPatched = void 0;\n/**\n * This symbol is used to mark express layer as being already instrumented\n * since its possible to use a given layer multiple times (ex: middlewares)\n */\nexports.kLayerPatched = Symbol('express-layer-patched');\n/**\n * This const define where on the `request` object the Instrumentation will mount the\n * current stack of express layer.\n *\n * It is necessary because express doesn't store the different layers\n * (ie: middleware, router etc) that it called to get to the current layer.\n * Given that, the only way to know the route of a given layer is to\n * store the path of where each previous layer has been mounted.\n *\n * ex: bodyParser > auth middleware > /users router > get /:id\n *  in this case the stack would be: [\"/users\", \"/:id\"]\n *\n * ex2: bodyParser > /api router > /v1 router > /users router > get /:id\n *  stack: [\"/api\", \"/v1\", \"/users\", \":id\"]\n *\n */\nexports._LAYERS_STORE_PROPERTY = '__ot_middlewares';\n//# sourceMappingURL=internal-types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVudGVsZW1ldHJ5K2luc3RydW1lbnRhdGlvbi1leHByZXNzQDAuNTcuMF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjAvbm9kZV9tb2R1bGVzL0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzL2J1aWxkL3NyYy9pbnRlcm5hbC10eXBlcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCw4QkFBOEIsR0FBRyxxQkFBcUI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Ac29saWQtY29ubmVjdC93ZWIvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVudGVsZW1ldHJ5K2luc3RydW1lbnRhdGlvbi1leHByZXNzQDAuNTcuMF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjAvbm9kZV9tb2R1bGVzL0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzL2J1aWxkL3NyYy9pbnRlcm5hbC10eXBlcy5qcz8yMzZmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLypcbiAqIENvcHlyaWdodCBUaGUgT3BlblRlbGVtZXRyeSBBdXRob3JzXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuX0xBWUVSU19TVE9SRV9QUk9QRVJUWSA9IGV4cG9ydHMua0xheWVyUGF0Y2hlZCA9IHZvaWQgMDtcbi8qKlxuICogVGhpcyBzeW1ib2wgaXMgdXNlZCB0byBtYXJrIGV4cHJlc3MgbGF5ZXIgYXMgYmVpbmcgYWxyZWFkeSBpbnN0cnVtZW50ZWRcbiAqIHNpbmNlIGl0cyBwb3NzaWJsZSB0byB1c2UgYSBnaXZlbiBsYXllciBtdWx0aXBsZSB0aW1lcyAoZXg6IG1pZGRsZXdhcmVzKVxuICovXG5leHBvcnRzLmtMYXllclBhdGNoZWQgPSBTeW1ib2woJ2V4cHJlc3MtbGF5ZXItcGF0Y2hlZCcpO1xuLyoqXG4gKiBUaGlzIGNvbnN0IGRlZmluZSB3aGVyZSBvbiB0aGUgYHJlcXVlc3RgIG9iamVjdCB0aGUgSW5zdHJ1bWVudGF0aW9uIHdpbGwgbW91bnQgdGhlXG4gKiBjdXJyZW50IHN0YWNrIG9mIGV4cHJlc3MgbGF5ZXIuXG4gKlxuICogSXQgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgZXhwcmVzcyBkb2Vzbid0IHN0b3JlIHRoZSBkaWZmZXJlbnQgbGF5ZXJzXG4gKiAoaWU6IG1pZGRsZXdhcmUsIHJvdXRlciBldGMpIHRoYXQgaXQgY2FsbGVkIHRvIGdldCB0byB0aGUgY3VycmVudCBsYXllci5cbiAqIEdpdmVuIHRoYXQsIHRoZSBvbmx5IHdheSB0byBrbm93IHRoZSByb3V0ZSBvZiBhIGdpdmVuIGxheWVyIGlzIHRvXG4gKiBzdG9yZSB0aGUgcGF0aCBvZiB3aGVyZSBlYWNoIHByZXZpb3VzIGxheWVyIGhhcyBiZWVuIG1vdW50ZWQuXG4gKlxuICogZXg6IGJvZHlQYXJzZXIgPiBhdXRoIG1pZGRsZXdhcmUgPiAvdXNlcnMgcm91dGVyID4gZ2V0IC86aWRcbiAqICBpbiB0aGlzIGNhc2UgdGhlIHN0YWNrIHdvdWxkIGJlOiBbXCIvdXNlcnNcIiwgXCIvOmlkXCJdXG4gKlxuICogZXgyOiBib2R5UGFyc2VyID4gL2FwaSByb3V0ZXIgPiAvdjEgcm91dGVyID4gL3VzZXJzIHJvdXRlciA+IGdldCAvOmlkXG4gKiAgc3RhY2s6IFtcIi9hcGlcIiwgXCIvdjFcIiwgXCIvdXNlcnNcIiwgXCI6aWRcIl1cbiAqXG4gKi9cbmV4cG9ydHMuX0xBWUVSU19TVE9SRV9QUk9QRVJUWSA9ICdfX290X21pZGRsZXdhcmVzJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVybmFsLXR5cGVzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/internal-types.js\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/utils.js":
/*!******************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/utils.js ***!
  \******************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.getActualMatchedRoute = exports.getConstructedRoute = exports.getLayerPath = exports.asErrorAndMessage = exports.isLayerIgnored = exports.getLayerMetadata = exports.getRouterPath = exports.storeLayerPath = void 0;\nconst ExpressLayerType_1 = __webpack_require__(/*! ./enums/ExpressLayerType */ \"(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/enums/ExpressLayerType.js\");\nconst AttributeNames_1 = __webpack_require__(/*! ./enums/AttributeNames */ \"(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/enums/AttributeNames.js\");\nconst internal_types_1 = __webpack_require__(/*! ./internal-types */ \"(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/internal-types.js\");\n/**\n * Store layers path in the request to be able to construct route later\n * @param request The request where\n * @param [value] the value to push into the array\n */\nconst storeLayerPath = (request, value) => {\n    if (Array.isArray(request[internal_types_1._LAYERS_STORE_PROPERTY]) === false) {\n        Object.defineProperty(request, internal_types_1._LAYERS_STORE_PROPERTY, {\n            enumerable: false,\n            value: [],\n        });\n    }\n    if (value === undefined)\n        return { isLayerPathStored: false };\n    request[internal_types_1._LAYERS_STORE_PROPERTY].push(value);\n    return { isLayerPathStored: true };\n};\nexports.storeLayerPath = storeLayerPath;\n/**\n * Recursively search the router path from layer stack\n * @param path The path to reconstruct\n * @param layer The layer to reconstruct from\n * @returns The reconstructed path\n */\nconst getRouterPath = (path, layer) => {\n    const stackLayer = layer.handle?.stack?.[0];\n    if (stackLayer?.route?.path) {\n        return `${path}${stackLayer.route.path}`;\n    }\n    if (stackLayer?.handle?.stack) {\n        return (0, exports.getRouterPath)(path, stackLayer);\n    }\n    return path;\n};\nexports.getRouterPath = getRouterPath;\n/**\n * Parse express layer context to retrieve a name and attributes.\n * @param route The route of the layer\n * @param layer Express layer\n * @param [layerPath] if present, the path on which the layer has been mounted\n */\nconst getLayerMetadata = (route, layer, layerPath) => {\n    if (layer.name === 'router') {\n        const maybeRouterPath = (0, exports.getRouterPath)('', layer);\n        const extractedRouterPath = maybeRouterPath\n            ? maybeRouterPath\n            : layerPath || route || '/';\n        return {\n            attributes: {\n                [AttributeNames_1.AttributeNames.EXPRESS_NAME]: extractedRouterPath,\n                [AttributeNames_1.AttributeNames.EXPRESS_TYPE]: ExpressLayerType_1.ExpressLayerType.ROUTER,\n            },\n            name: `router - ${extractedRouterPath}`,\n        };\n    }\n    else if (layer.name === 'bound dispatch' || layer.name === 'handle') {\n        return {\n            attributes: {\n                [AttributeNames_1.AttributeNames.EXPRESS_NAME]: (route || layerPath) ?? 'request handler',\n                [AttributeNames_1.AttributeNames.EXPRESS_TYPE]: ExpressLayerType_1.ExpressLayerType.REQUEST_HANDLER,\n            },\n            name: `request handler${layer.path ? ` - ${route || layerPath}` : ''}`,\n        };\n    }\n    else {\n        return {\n            attributes: {\n                [AttributeNames_1.AttributeNames.EXPRESS_NAME]: layer.name,\n                [AttributeNames_1.AttributeNames.EXPRESS_TYPE]: ExpressLayerType_1.ExpressLayerType.MIDDLEWARE,\n            },\n            name: `middleware - ${layer.name}`,\n        };\n    }\n};\nexports.getLayerMetadata = getLayerMetadata;\n/**\n * Check whether the given obj match pattern\n * @param constant e.g URL of request\n * @param obj obj to inspect\n * @param pattern Match pattern\n */\nconst satisfiesPattern = (constant, pattern) => {\n    if (typeof pattern === 'string') {\n        return pattern === constant;\n    }\n    else if (pattern instanceof RegExp) {\n        return pattern.test(constant);\n    }\n    else if (typeof pattern === 'function') {\n        return pattern(constant);\n    }\n    else {\n        throw new TypeError('Pattern is in unsupported datatype');\n    }\n};\n/**\n * Check whether the given request is ignored by configuration\n * It will not re-throw exceptions from `list` provided by the client\n * @param constant e.g URL of request\n * @param [list] List of ignore patterns\n * @param [onException] callback for doing something when an exception has\n *     occurred\n */\nconst isLayerIgnored = (name, type, config) => {\n    if (Array.isArray(config?.ignoreLayersType) &&\n        config?.ignoreLayersType?.includes(type)) {\n        return true;\n    }\n    if (Array.isArray(config?.ignoreLayers) === false)\n        return false;\n    try {\n        for (const pattern of config.ignoreLayers) {\n            if (satisfiesPattern(name, pattern)) {\n                return true;\n            }\n        }\n    }\n    catch (e) {\n        /* catch block*/\n    }\n    return false;\n};\nexports.isLayerIgnored = isLayerIgnored;\n/**\n * Converts a user-provided error value into an error and error message pair\n *\n * @param error - User-provided error value\n * @returns Both an Error or string representation of the value and an error message\n */\nconst asErrorAndMessage = (error) => error instanceof Error\n    ? [error, error.message]\n    : [String(error), String(error)];\nexports.asErrorAndMessage = asErrorAndMessage;\n/**\n * Extracts the layer path from the route arguments\n *\n * @param args - Arguments of the route\n * @returns The layer path\n */\nconst getLayerPath = (args) => {\n    const firstArg = args[0];\n    if (Array.isArray(firstArg)) {\n        return firstArg.map(arg => extractLayerPathSegment(arg) || '').join(',');\n    }\n    return extractLayerPathSegment(firstArg);\n};\nexports.getLayerPath = getLayerPath;\nconst extractLayerPathSegment = (arg) => {\n    if (typeof arg === 'string') {\n        return arg;\n    }\n    if (arg instanceof RegExp || typeof arg === 'number') {\n        return arg.toString();\n    }\n    return;\n};\nfunction getConstructedRoute(req) {\n    const layersStore = Array.isArray(req[internal_types_1._LAYERS_STORE_PROPERTY])\n        ? req[internal_types_1._LAYERS_STORE_PROPERTY]\n        : [];\n    const meaningfulPaths = layersStore.filter(path => path !== '/' && path !== '/*');\n    if (meaningfulPaths.length === 1 && meaningfulPaths[0] === '*') {\n        return '*';\n    }\n    // Join parts and remove duplicate slashes\n    return meaningfulPaths.join('').replace(/\\/{2,}/g, '/');\n}\nexports.getConstructedRoute = getConstructedRoute;\n/**\n * Extracts the actual matched route from Express request for OpenTelemetry instrumentation.\n * Returns the route that should be used as the http.route attribute.\n *\n * @param req - The Express request object with layers store\n * @param layersStoreProperty - The property name where layer paths are stored\n * @returns The matched route string or undefined if no valid route is found\n */\nfunction getActualMatchedRoute(req) {\n    const layersStore = Array.isArray(req[internal_types_1._LAYERS_STORE_PROPERTY])\n        ? req[internal_types_1._LAYERS_STORE_PROPERTY]\n        : [];\n    // If no layers are stored, no route can be determined\n    if (layersStore.length === 0) {\n        return undefined;\n    }\n    // Handle root path case - if all paths are root, only return root if originalUrl is also root\n    // The layer store also includes root paths in case a non-existing url was requested\n    if (layersStore.every(path => path === '/')) {\n        return req.originalUrl === '/' ? '/' : undefined;\n    }\n    const constructedRoute = getConstructedRoute(req);\n    if (constructedRoute === '*') {\n        return constructedRoute;\n    }\n    // For RegExp routes or route arrays, return the constructed route\n    // This handles the case where the route is defined using RegExp or an array\n    if (constructedRoute.includes('/') &&\n        (constructedRoute.includes(',') ||\n            constructedRoute.includes('\\\\') ||\n            constructedRoute.includes('*') ||\n            constructedRoute.includes('['))) {\n        return constructedRoute;\n    }\n    // Ensure route starts with '/' if it doesn't already\n    const normalizedRoute = constructedRoute.startsWith('/')\n        ? constructedRoute\n        : `/${constructedRoute}`;\n    // Validate that this appears to be a matched route\n    // A route is considered matched if:\n    // 1. We have a constructed route\n    // 2. The original URL matches or starts with our route pattern\n    const isValidRoute = normalizedRoute.length > 0 &&\n        (req.originalUrl === normalizedRoute ||\n            req.originalUrl.startsWith(normalizedRoute) ||\n            isRoutePattern(normalizedRoute));\n    return isValidRoute ? normalizedRoute : undefined;\n}\nexports.getActualMatchedRoute = getActualMatchedRoute;\n/**\n * Checks if a route contains parameter patterns (e.g., :id, :userId)\n * which are valid even if they don't exactly match the original URL\n */\nfunction isRoutePattern(route) {\n    return route.includes(':') || route.includes('*');\n}\n//# sourceMappingURL=utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVudGVsZW1ldHJ5K2luc3RydW1lbnRhdGlvbi1leHByZXNzQDAuNTcuMF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjAvbm9kZV9tb2R1bGVzL0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzL2J1aWxkL3NyYy91dGlscy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCw2QkFBNkIsR0FBRywyQkFBMkIsR0FBRyxvQkFBb0IsR0FBRyx5QkFBeUIsR0FBRyxzQkFBc0IsR0FBRyx3QkFBd0IsR0FBRyxxQkFBcUIsR0FBRyxzQkFBc0I7QUFDbk4sMkJBQTJCLG1CQUFPLENBQUMsK05BQTBCO0FBQzdELHlCQUF5QixtQkFBTyxDQUFDLDJOQUF3QjtBQUN6RCx5QkFBeUIsbUJBQU8sQ0FBQywrTUFBa0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7QUFDYjtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsS0FBSyxFQUFFLHNCQUFzQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsOEJBQThCLG9CQUFvQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixvQ0FBb0MsbUJBQW1CLG1CQUFtQixPQUFPO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLGtDQUFrQyxXQUFXO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsR0FBRztBQUNuRDtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsaUJBQWlCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Ac29saWQtY29ubmVjdC93ZWIvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVudGVsZW1ldHJ5K2luc3RydW1lbnRhdGlvbi1leHByZXNzQDAuNTcuMF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjAvbm9kZV9tb2R1bGVzL0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzL2J1aWxkL3NyYy91dGlscy5qcz9jYjRmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLypcbiAqIENvcHlyaWdodCBUaGUgT3BlblRlbGVtZXRyeSBBdXRob3JzXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZ2V0QWN0dWFsTWF0Y2hlZFJvdXRlID0gZXhwb3J0cy5nZXRDb25zdHJ1Y3RlZFJvdXRlID0gZXhwb3J0cy5nZXRMYXllclBhdGggPSBleHBvcnRzLmFzRXJyb3JBbmRNZXNzYWdlID0gZXhwb3J0cy5pc0xheWVySWdub3JlZCA9IGV4cG9ydHMuZ2V0TGF5ZXJNZXRhZGF0YSA9IGV4cG9ydHMuZ2V0Um91dGVyUGF0aCA9IGV4cG9ydHMuc3RvcmVMYXllclBhdGggPSB2b2lkIDA7XG5jb25zdCBFeHByZXNzTGF5ZXJUeXBlXzEgPSByZXF1aXJlKFwiLi9lbnVtcy9FeHByZXNzTGF5ZXJUeXBlXCIpO1xuY29uc3QgQXR0cmlidXRlTmFtZXNfMSA9IHJlcXVpcmUoXCIuL2VudW1zL0F0dHJpYnV0ZU5hbWVzXCIpO1xuY29uc3QgaW50ZXJuYWxfdHlwZXNfMSA9IHJlcXVpcmUoXCIuL2ludGVybmFsLXR5cGVzXCIpO1xuLyoqXG4gKiBTdG9yZSBsYXllcnMgcGF0aCBpbiB0aGUgcmVxdWVzdCB0byBiZSBhYmxlIHRvIGNvbnN0cnVjdCByb3V0ZSBsYXRlclxuICogQHBhcmFtIHJlcXVlc3QgVGhlIHJlcXVlc3Qgd2hlcmVcbiAqIEBwYXJhbSBbdmFsdWVdIHRoZSB2YWx1ZSB0byBwdXNoIGludG8gdGhlIGFycmF5XG4gKi9cbmNvbnN0IHN0b3JlTGF5ZXJQYXRoID0gKHJlcXVlc3QsIHZhbHVlKSA9PiB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkocmVxdWVzdFtpbnRlcm5hbF90eXBlc18xLl9MQVlFUlNfU1RPUkVfUFJPUEVSVFldKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlcXVlc3QsIGludGVybmFsX3R5cGVzXzEuX0xBWUVSU19TVE9SRV9QUk9QRVJUWSwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICB2YWx1ZTogW10sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHsgaXNMYXllclBhdGhTdG9yZWQ6IGZhbHNlIH07XG4gICAgcmVxdWVzdFtpbnRlcm5hbF90eXBlc18xLl9MQVlFUlNfU1RPUkVfUFJPUEVSVFldLnB1c2godmFsdWUpO1xuICAgIHJldHVybiB7IGlzTGF5ZXJQYXRoU3RvcmVkOiB0cnVlIH07XG59O1xuZXhwb3J0cy5zdG9yZUxheWVyUGF0aCA9IHN0b3JlTGF5ZXJQYXRoO1xuLyoqXG4gKiBSZWN1cnNpdmVseSBzZWFyY2ggdGhlIHJvdXRlciBwYXRoIGZyb20gbGF5ZXIgc3RhY2tcbiAqIEBwYXJhbSBwYXRoIFRoZSBwYXRoIHRvIHJlY29uc3RydWN0XG4gKiBAcGFyYW0gbGF5ZXIgVGhlIGxheWVyIHRvIHJlY29uc3RydWN0IGZyb21cbiAqIEByZXR1cm5zIFRoZSByZWNvbnN0cnVjdGVkIHBhdGhcbiAqL1xuY29uc3QgZ2V0Um91dGVyUGF0aCA9IChwYXRoLCBsYXllcikgPT4ge1xuICAgIGNvbnN0IHN0YWNrTGF5ZXIgPSBsYXllci5oYW5kbGU/LnN0YWNrPy5bMF07XG4gICAgaWYgKHN0YWNrTGF5ZXI/LnJvdXRlPy5wYXRoKSB7XG4gICAgICAgIHJldHVybiBgJHtwYXRofSR7c3RhY2tMYXllci5yb3V0ZS5wYXRofWA7XG4gICAgfVxuICAgIGlmIChzdGFja0xheWVyPy5oYW5kbGU/LnN0YWNrKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhwb3J0cy5nZXRSb3V0ZXJQYXRoKShwYXRoLCBzdGFja0xheWVyKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdGg7XG59O1xuZXhwb3J0cy5nZXRSb3V0ZXJQYXRoID0gZ2V0Um91dGVyUGF0aDtcbi8qKlxuICogUGFyc2UgZXhwcmVzcyBsYXllciBjb250ZXh0IHRvIHJldHJpZXZlIGEgbmFtZSBhbmQgYXR0cmlidXRlcy5cbiAqIEBwYXJhbSByb3V0ZSBUaGUgcm91dGUgb2YgdGhlIGxheWVyXG4gKiBAcGFyYW0gbGF5ZXIgRXhwcmVzcyBsYXllclxuICogQHBhcmFtIFtsYXllclBhdGhdIGlmIHByZXNlbnQsIHRoZSBwYXRoIG9uIHdoaWNoIHRoZSBsYXllciBoYXMgYmVlbiBtb3VudGVkXG4gKi9cbmNvbnN0IGdldExheWVyTWV0YWRhdGEgPSAocm91dGUsIGxheWVyLCBsYXllclBhdGgpID0+IHtcbiAgICBpZiAobGF5ZXIubmFtZSA9PT0gJ3JvdXRlcicpIHtcbiAgICAgICAgY29uc3QgbWF5YmVSb3V0ZXJQYXRoID0gKDAsIGV4cG9ydHMuZ2V0Um91dGVyUGF0aCkoJycsIGxheWVyKTtcbiAgICAgICAgY29uc3QgZXh0cmFjdGVkUm91dGVyUGF0aCA9IG1heWJlUm91dGVyUGF0aFxuICAgICAgICAgICAgPyBtYXliZVJvdXRlclBhdGhcbiAgICAgICAgICAgIDogbGF5ZXJQYXRoIHx8IHJvdXRlIHx8ICcvJztcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICBbQXR0cmlidXRlTmFtZXNfMS5BdHRyaWJ1dGVOYW1lcy5FWFBSRVNTX05BTUVdOiBleHRyYWN0ZWRSb3V0ZXJQYXRoLFxuICAgICAgICAgICAgICAgIFtBdHRyaWJ1dGVOYW1lc18xLkF0dHJpYnV0ZU5hbWVzLkVYUFJFU1NfVFlQRV06IEV4cHJlc3NMYXllclR5cGVfMS5FeHByZXNzTGF5ZXJUeXBlLlJPVVRFUixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBuYW1lOiBgcm91dGVyIC0gJHtleHRyYWN0ZWRSb3V0ZXJQYXRofWAsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGxheWVyLm5hbWUgPT09ICdib3VuZCBkaXNwYXRjaCcgfHwgbGF5ZXIubmFtZSA9PT0gJ2hhbmRsZScpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICBbQXR0cmlidXRlTmFtZXNfMS5BdHRyaWJ1dGVOYW1lcy5FWFBSRVNTX05BTUVdOiAocm91dGUgfHwgbGF5ZXJQYXRoKSA/PyAncmVxdWVzdCBoYW5kbGVyJyxcbiAgICAgICAgICAgICAgICBbQXR0cmlidXRlTmFtZXNfMS5BdHRyaWJ1dGVOYW1lcy5FWFBSRVNTX1RZUEVdOiBFeHByZXNzTGF5ZXJUeXBlXzEuRXhwcmVzc0xheWVyVHlwZS5SRVFVRVNUX0hBTkRMRVIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbmFtZTogYHJlcXVlc3QgaGFuZGxlciR7bGF5ZXIucGF0aCA/IGAgLSAke3JvdXRlIHx8IGxheWVyUGF0aH1gIDogJyd9YCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgW0F0dHJpYnV0ZU5hbWVzXzEuQXR0cmlidXRlTmFtZXMuRVhQUkVTU19OQU1FXTogbGF5ZXIubmFtZSxcbiAgICAgICAgICAgICAgICBbQXR0cmlidXRlTmFtZXNfMS5BdHRyaWJ1dGVOYW1lcy5FWFBSRVNTX1RZUEVdOiBFeHByZXNzTGF5ZXJUeXBlXzEuRXhwcmVzc0xheWVyVHlwZS5NSURETEVXQVJFLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG5hbWU6IGBtaWRkbGV3YXJlIC0gJHtsYXllci5uYW1lfWAsXG4gICAgICAgIH07XG4gICAgfVxufTtcbmV4cG9ydHMuZ2V0TGF5ZXJNZXRhZGF0YSA9IGdldExheWVyTWV0YWRhdGE7XG4vKipcbiAqIENoZWNrIHdoZXRoZXIgdGhlIGdpdmVuIG9iaiBtYXRjaCBwYXR0ZXJuXG4gKiBAcGFyYW0gY29uc3RhbnQgZS5nIFVSTCBvZiByZXF1ZXN0XG4gKiBAcGFyYW0gb2JqIG9iaiB0byBpbnNwZWN0XG4gKiBAcGFyYW0gcGF0dGVybiBNYXRjaCBwYXR0ZXJuXG4gKi9cbmNvbnN0IHNhdGlzZmllc1BhdHRlcm4gPSAoY29uc3RhbnQsIHBhdHRlcm4pID0+IHtcbiAgICBpZiAodHlwZW9mIHBhdHRlcm4gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBwYXR0ZXJuID09PSBjb25zdGFudDtcbiAgICB9XG4gICAgZWxzZSBpZiAocGF0dGVybiBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuICAgICAgICByZXR1cm4gcGF0dGVybi50ZXN0KGNvbnN0YW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHBhdHRlcm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHBhdHRlcm4oY29uc3RhbnQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUGF0dGVybiBpcyBpbiB1bnN1cHBvcnRlZCBkYXRhdHlwZScpO1xuICAgIH1cbn07XG4vKipcbiAqIENoZWNrIHdoZXRoZXIgdGhlIGdpdmVuIHJlcXVlc3QgaXMgaWdub3JlZCBieSBjb25maWd1cmF0aW9uXG4gKiBJdCB3aWxsIG5vdCByZS10aHJvdyBleGNlcHRpb25zIGZyb20gYGxpc3RgIHByb3ZpZGVkIGJ5IHRoZSBjbGllbnRcbiAqIEBwYXJhbSBjb25zdGFudCBlLmcgVVJMIG9mIHJlcXVlc3RcbiAqIEBwYXJhbSBbbGlzdF0gTGlzdCBvZiBpZ25vcmUgcGF0dGVybnNcbiAqIEBwYXJhbSBbb25FeGNlcHRpb25dIGNhbGxiYWNrIGZvciBkb2luZyBzb21ldGhpbmcgd2hlbiBhbiBleGNlcHRpb24gaGFzXG4gKiAgICAgb2NjdXJyZWRcbiAqL1xuY29uc3QgaXNMYXllcklnbm9yZWQgPSAobmFtZSwgdHlwZSwgY29uZmlnKSA9PiB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY29uZmlnPy5pZ25vcmVMYXllcnNUeXBlKSAmJlxuICAgICAgICBjb25maWc/Lmlnbm9yZUxheWVyc1R5cGU/LmluY2x1ZGVzKHR5cGUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShjb25maWc/Lmlnbm9yZUxheWVycykgPT09IGZhbHNlKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIGNvbmZpZy5pZ25vcmVMYXllcnMpIHtcbiAgICAgICAgICAgIGlmIChzYXRpc2ZpZXNQYXR0ZXJuKG5hbWUsIHBhdHRlcm4pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgLyogY2F0Y2ggYmxvY2sqL1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuZXhwb3J0cy5pc0xheWVySWdub3JlZCA9IGlzTGF5ZXJJZ25vcmVkO1xuLyoqXG4gKiBDb252ZXJ0cyBhIHVzZXItcHJvdmlkZWQgZXJyb3IgdmFsdWUgaW50byBhbiBlcnJvciBhbmQgZXJyb3IgbWVzc2FnZSBwYWlyXG4gKlxuICogQHBhcmFtIGVycm9yIC0gVXNlci1wcm92aWRlZCBlcnJvciB2YWx1ZVxuICogQHJldHVybnMgQm90aCBhbiBFcnJvciBvciBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHZhbHVlIGFuZCBhbiBlcnJvciBtZXNzYWdlXG4gKi9cbmNvbnN0IGFzRXJyb3JBbmRNZXNzYWdlID0gKGVycm9yKSA9PiBlcnJvciBpbnN0YW5jZW9mIEVycm9yXG4gICAgPyBbZXJyb3IsIGVycm9yLm1lc3NhZ2VdXG4gICAgOiBbU3RyaW5nKGVycm9yKSwgU3RyaW5nKGVycm9yKV07XG5leHBvcnRzLmFzRXJyb3JBbmRNZXNzYWdlID0gYXNFcnJvckFuZE1lc3NhZ2U7XG4vKipcbiAqIEV4dHJhY3RzIHRoZSBsYXllciBwYXRoIGZyb20gdGhlIHJvdXRlIGFyZ3VtZW50c1xuICpcbiAqIEBwYXJhbSBhcmdzIC0gQXJndW1lbnRzIG9mIHRoZSByb3V0ZVxuICogQHJldHVybnMgVGhlIGxheWVyIHBhdGhcbiAqL1xuY29uc3QgZ2V0TGF5ZXJQYXRoID0gKGFyZ3MpID0+IHtcbiAgICBjb25zdCBmaXJzdEFyZyA9IGFyZ3NbMF07XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZmlyc3RBcmcpKSB7XG4gICAgICAgIHJldHVybiBmaXJzdEFyZy5tYXAoYXJnID0+IGV4dHJhY3RMYXllclBhdGhTZWdtZW50KGFyZykgfHwgJycpLmpvaW4oJywnKTtcbiAgICB9XG4gICAgcmV0dXJuIGV4dHJhY3RMYXllclBhdGhTZWdtZW50KGZpcnN0QXJnKTtcbn07XG5leHBvcnRzLmdldExheWVyUGF0aCA9IGdldExheWVyUGF0aDtcbmNvbnN0IGV4dHJhY3RMYXllclBhdGhTZWdtZW50ID0gKGFyZykgPT4ge1xuICAgIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gYXJnO1xuICAgIH1cbiAgICBpZiAoYXJnIGluc3RhbmNlb2YgUmVnRXhwIHx8IHR5cGVvZiBhcmcgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHJldHVybiBhcmcudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgcmV0dXJuO1xufTtcbmZ1bmN0aW9uIGdldENvbnN0cnVjdGVkUm91dGUocmVxKSB7XG4gICAgY29uc3QgbGF5ZXJzU3RvcmUgPSBBcnJheS5pc0FycmF5KHJlcVtpbnRlcm5hbF90eXBlc18xLl9MQVlFUlNfU1RPUkVfUFJPUEVSVFldKVxuICAgICAgICA/IHJlcVtpbnRlcm5hbF90eXBlc18xLl9MQVlFUlNfU1RPUkVfUFJPUEVSVFldXG4gICAgICAgIDogW107XG4gICAgY29uc3QgbWVhbmluZ2Z1bFBhdGhzID0gbGF5ZXJzU3RvcmUuZmlsdGVyKHBhdGggPT4gcGF0aCAhPT0gJy8nICYmIHBhdGggIT09ICcvKicpO1xuICAgIGlmIChtZWFuaW5nZnVsUGF0aHMubGVuZ3RoID09PSAxICYmIG1lYW5pbmdmdWxQYXRoc1swXSA9PT0gJyonKSB7XG4gICAgICAgIHJldHVybiAnKic7XG4gICAgfVxuICAgIC8vIEpvaW4gcGFydHMgYW5kIHJlbW92ZSBkdXBsaWNhdGUgc2xhc2hlc1xuICAgIHJldHVybiBtZWFuaW5nZnVsUGF0aHMuam9pbignJykucmVwbGFjZSgvXFwvezIsfS9nLCAnLycpO1xufVxuZXhwb3J0cy5nZXRDb25zdHJ1Y3RlZFJvdXRlID0gZ2V0Q29uc3RydWN0ZWRSb3V0ZTtcbi8qKlxuICogRXh0cmFjdHMgdGhlIGFjdHVhbCBtYXRjaGVkIHJvdXRlIGZyb20gRXhwcmVzcyByZXF1ZXN0IGZvciBPcGVuVGVsZW1ldHJ5IGluc3RydW1lbnRhdGlvbi5cbiAqIFJldHVybnMgdGhlIHJvdXRlIHRoYXQgc2hvdWxkIGJlIHVzZWQgYXMgdGhlIGh0dHAucm91dGUgYXR0cmlidXRlLlxuICpcbiAqIEBwYXJhbSByZXEgLSBUaGUgRXhwcmVzcyByZXF1ZXN0IG9iamVjdCB3aXRoIGxheWVycyBzdG9yZVxuICogQHBhcmFtIGxheWVyc1N0b3JlUHJvcGVydHkgLSBUaGUgcHJvcGVydHkgbmFtZSB3aGVyZSBsYXllciBwYXRocyBhcmUgc3RvcmVkXG4gKiBAcmV0dXJucyBUaGUgbWF0Y2hlZCByb3V0ZSBzdHJpbmcgb3IgdW5kZWZpbmVkIGlmIG5vIHZhbGlkIHJvdXRlIGlzIGZvdW5kXG4gKi9cbmZ1bmN0aW9uIGdldEFjdHVhbE1hdGNoZWRSb3V0ZShyZXEpIHtcbiAgICBjb25zdCBsYXllcnNTdG9yZSA9IEFycmF5LmlzQXJyYXkocmVxW2ludGVybmFsX3R5cGVzXzEuX0xBWUVSU19TVE9SRV9QUk9QRVJUWV0pXG4gICAgICAgID8gcmVxW2ludGVybmFsX3R5cGVzXzEuX0xBWUVSU19TVE9SRV9QUk9QRVJUWV1cbiAgICAgICAgOiBbXTtcbiAgICAvLyBJZiBubyBsYXllcnMgYXJlIHN0b3JlZCwgbm8gcm91dGUgY2FuIGJlIGRldGVybWluZWRcbiAgICBpZiAobGF5ZXJzU3RvcmUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8vIEhhbmRsZSByb290IHBhdGggY2FzZSAtIGlmIGFsbCBwYXRocyBhcmUgcm9vdCwgb25seSByZXR1cm4gcm9vdCBpZiBvcmlnaW5hbFVybCBpcyBhbHNvIHJvb3RcbiAgICAvLyBUaGUgbGF5ZXIgc3RvcmUgYWxzbyBpbmNsdWRlcyByb290IHBhdGhzIGluIGNhc2UgYSBub24tZXhpc3RpbmcgdXJsIHdhcyByZXF1ZXN0ZWRcbiAgICBpZiAobGF5ZXJzU3RvcmUuZXZlcnkocGF0aCA9PiBwYXRoID09PSAnLycpKSB7XG4gICAgICAgIHJldHVybiByZXEub3JpZ2luYWxVcmwgPT09ICcvJyA/ICcvJyA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgY29uc3RydWN0ZWRSb3V0ZSA9IGdldENvbnN0cnVjdGVkUm91dGUocmVxKTtcbiAgICBpZiAoY29uc3RydWN0ZWRSb3V0ZSA9PT0gJyonKSB7XG4gICAgICAgIHJldHVybiBjb25zdHJ1Y3RlZFJvdXRlO1xuICAgIH1cbiAgICAvLyBGb3IgUmVnRXhwIHJvdXRlcyBvciByb3V0ZSBhcnJheXMsIHJldHVybiB0aGUgY29uc3RydWN0ZWQgcm91dGVcbiAgICAvLyBUaGlzIGhhbmRsZXMgdGhlIGNhc2Ugd2hlcmUgdGhlIHJvdXRlIGlzIGRlZmluZWQgdXNpbmcgUmVnRXhwIG9yIGFuIGFycmF5XG4gICAgaWYgKGNvbnN0cnVjdGVkUm91dGUuaW5jbHVkZXMoJy8nKSAmJlxuICAgICAgICAoY29uc3RydWN0ZWRSb3V0ZS5pbmNsdWRlcygnLCcpIHx8XG4gICAgICAgICAgICBjb25zdHJ1Y3RlZFJvdXRlLmluY2x1ZGVzKCdcXFxcJykgfHxcbiAgICAgICAgICAgIGNvbnN0cnVjdGVkUm91dGUuaW5jbHVkZXMoJyonKSB8fFxuICAgICAgICAgICAgY29uc3RydWN0ZWRSb3V0ZS5pbmNsdWRlcygnWycpKSkge1xuICAgICAgICByZXR1cm4gY29uc3RydWN0ZWRSb3V0ZTtcbiAgICB9XG4gICAgLy8gRW5zdXJlIHJvdXRlIHN0YXJ0cyB3aXRoICcvJyBpZiBpdCBkb2Vzbid0IGFscmVhZHlcbiAgICBjb25zdCBub3JtYWxpemVkUm91dGUgPSBjb25zdHJ1Y3RlZFJvdXRlLnN0YXJ0c1dpdGgoJy8nKVxuICAgICAgICA/IGNvbnN0cnVjdGVkUm91dGVcbiAgICAgICAgOiBgLyR7Y29uc3RydWN0ZWRSb3V0ZX1gO1xuICAgIC8vIFZhbGlkYXRlIHRoYXQgdGhpcyBhcHBlYXJzIHRvIGJlIGEgbWF0Y2hlZCByb3V0ZVxuICAgIC8vIEEgcm91dGUgaXMgY29uc2lkZXJlZCBtYXRjaGVkIGlmOlxuICAgIC8vIDEuIFdlIGhhdmUgYSBjb25zdHJ1Y3RlZCByb3V0ZVxuICAgIC8vIDIuIFRoZSBvcmlnaW5hbCBVUkwgbWF0Y2hlcyBvciBzdGFydHMgd2l0aCBvdXIgcm91dGUgcGF0dGVyblxuICAgIGNvbnN0IGlzVmFsaWRSb3V0ZSA9IG5vcm1hbGl6ZWRSb3V0ZS5sZW5ndGggPiAwICYmXG4gICAgICAgIChyZXEub3JpZ2luYWxVcmwgPT09IG5vcm1hbGl6ZWRSb3V0ZSB8fFxuICAgICAgICAgICAgcmVxLm9yaWdpbmFsVXJsLnN0YXJ0c1dpdGgobm9ybWFsaXplZFJvdXRlKSB8fFxuICAgICAgICAgICAgaXNSb3V0ZVBhdHRlcm4obm9ybWFsaXplZFJvdXRlKSk7XG4gICAgcmV0dXJuIGlzVmFsaWRSb3V0ZSA/IG5vcm1hbGl6ZWRSb3V0ZSA6IHVuZGVmaW5lZDtcbn1cbmV4cG9ydHMuZ2V0QWN0dWFsTWF0Y2hlZFJvdXRlID0gZ2V0QWN0dWFsTWF0Y2hlZFJvdXRlO1xuLyoqXG4gKiBDaGVja3MgaWYgYSByb3V0ZSBjb250YWlucyBwYXJhbWV0ZXIgcGF0dGVybnMgKGUuZy4sIDppZCwgOnVzZXJJZClcbiAqIHdoaWNoIGFyZSB2YWxpZCBldmVuIGlmIHRoZXkgZG9uJ3QgZXhhY3RseSBtYXRjaCB0aGUgb3JpZ2luYWwgVVJMXG4gKi9cbmZ1bmN0aW9uIGlzUm91dGVQYXR0ZXJuKHJvdXRlKSB7XG4gICAgcmV0dXJuIHJvdXRlLmluY2x1ZGVzKCc6JykgfHwgcm91dGUuaW5jbHVkZXMoJyonKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWxzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/utils.js\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/version.js":
/*!********************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/version.js ***!
  \********************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.PACKAGE_NAME = exports.PACKAGE_VERSION = void 0;\n// this is autogenerated file, see scripts/version-update.js\nexports.PACKAGE_VERSION = '0.57.0';\nexports.PACKAGE_NAME = '@opentelemetry/instrumentation-express';\n//# sourceMappingURL=version.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVudGVsZW1ldHJ5K2luc3RydW1lbnRhdGlvbi1leHByZXNzQDAuNTcuMF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjAvbm9kZV9tb2R1bGVzL0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzL2J1aWxkL3NyYy92ZXJzaW9uLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELG9CQUFvQixHQUFHLHVCQUF1QjtBQUM5QztBQUNBLHVCQUF1QjtBQUN2QixvQkFBb0I7QUFDcEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Ac29saWQtY29ubmVjdC93ZWIvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVudGVsZW1ldHJ5K2luc3RydW1lbnRhdGlvbi1leHByZXNzQDAuNTcuMF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjAvbm9kZV9tb2R1bGVzL0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzL2J1aWxkL3NyYy92ZXJzaW9uLmpzPzMwYTkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vKlxuICogQ29weXJpZ2h0IFRoZSBPcGVuVGVsZW1ldHJ5IEF1dGhvcnNcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwczovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5QQUNLQUdFX05BTUUgPSBleHBvcnRzLlBBQ0tBR0VfVkVSU0lPTiA9IHZvaWQgMDtcbi8vIHRoaXMgaXMgYXV0b2dlbmVyYXRlZCBmaWxlLCBzZWUgc2NyaXB0cy92ZXJzaW9uLXVwZGF0ZS5qc1xuZXhwb3J0cy5QQUNLQUdFX1ZFUlNJT04gPSAnMC41Ny4wJztcbmV4cG9ydHMuUEFDS0FHRV9OQU1FID0gJ0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZlcnNpb24uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/version.js\n");

/***/ }),

/***/ "(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/instrumentation.js":
/*!****************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/instrumentation.js ***!
  \****************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval(";globalThis[\"_sentryRewritesTunnelPath\"] = undefined;globalThis[\"SENTRY_RELEASE\"] = undefined;globalThis[\"_sentryBasePath\"] = undefined;globalThis[\"_sentryNextJsVersion\"] = \"14.2.35\";globalThis[\"_sentryRewriteFramesDistDir\"] = \".next\";\n/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ExpressInstrumentation = void 0;\nconst core_1 = __webpack_require__(/*! @opentelemetry/core */ \"(ssr)/../../node_modules/.pnpm/@opentelemetry+core@2.4.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/index.js\");\nconst api_1 = __webpack_require__(/*! @opentelemetry/api */ \"(ssr)/../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/index.js\");\nconst ExpressLayerType_1 = __webpack_require__(/*! ./enums/ExpressLayerType */ \"(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/enums/ExpressLayerType.js\");\nconst AttributeNames_1 = __webpack_require__(/*! ./enums/AttributeNames */ \"(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/enums/AttributeNames.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/utils.js\");\n/** @knipignore */\nconst version_1 = __webpack_require__(/*! ./version */ \"(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/version.js\");\nconst instrumentation_1 = __webpack_require__(/*! @opentelemetry/instrumentation */ \"(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation@0.208.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation/build/esm/index.js\");\nconst semantic_conventions_1 = __webpack_require__(/*! @opentelemetry/semantic-conventions */ \"(ssr)/../../node_modules/.pnpm/@opentelemetry+semantic-conventions@1.39.0/node_modules/@opentelemetry/semantic-conventions/build/esm/index.js\");\nconst internal_types_1 = __webpack_require__(/*! ./internal-types */ \"(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/internal-types.js\");\n/** Express instrumentation for OpenTelemetry */\nclass ExpressInstrumentation extends instrumentation_1.InstrumentationBase {\n    constructor(config = {}) {\n        super(version_1.PACKAGE_NAME, version_1.PACKAGE_VERSION, config);\n    }\n    init() {\n        return [\n            new instrumentation_1.InstrumentationNodeModuleDefinition('express', ['>=4.0.0 <6'], moduleExports => {\n                const isExpressWithRouterPrototype = typeof moduleExports?.Router?.prototype?.route === 'function';\n                const routerProto = isExpressWithRouterPrototype\n                    ? moduleExports.Router.prototype // Express v5\n                    : moduleExports.Router; // Express v4\n                // patch express.Router.route\n                if ((0, instrumentation_1.isWrapped)(routerProto.route)) {\n                    this._unwrap(routerProto, 'route');\n                }\n                this._wrap(routerProto, 'route', this._getRoutePatch());\n                // patch express.Router.use\n                if ((0, instrumentation_1.isWrapped)(routerProto.use)) {\n                    this._unwrap(routerProto, 'use');\n                }\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                this._wrap(routerProto, 'use', this._getRouterUsePatch());\n                // patch express.Application.use\n                if ((0, instrumentation_1.isWrapped)(moduleExports.application.use)) {\n                    this._unwrap(moduleExports.application, 'use');\n                }\n                this._wrap(moduleExports.application, 'use', \n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                this._getAppUsePatch(isExpressWithRouterPrototype));\n                return moduleExports;\n            }, moduleExports => {\n                if (moduleExports === undefined)\n                    return;\n                const isExpressWithRouterPrototype = typeof moduleExports?.Router?.prototype?.route === 'function';\n                const routerProto = isExpressWithRouterPrototype\n                    ? moduleExports.Router.prototype\n                    : moduleExports.Router;\n                this._unwrap(routerProto, 'route');\n                this._unwrap(routerProto, 'use');\n                this._unwrap(moduleExports.application, 'use');\n            }),\n        ];\n    }\n    /**\n     * Get the patch for Router.route function\n     */\n    _getRoutePatch() {\n        const instrumentation = this;\n        return function (original) {\n            return function route_trace(...args) {\n                const route = original.apply(this, args);\n                const layer = this.stack[this.stack.length - 1];\n                instrumentation._applyPatch(layer, (0, utils_1.getLayerPath)(args));\n                return route;\n            };\n        };\n    }\n    /**\n     * Get the patch for Router.use function\n     */\n    _getRouterUsePatch() {\n        const instrumentation = this;\n        return function (original) {\n            return function use(...args) {\n                const route = original.apply(this, args);\n                const layer = this.stack[this.stack.length - 1];\n                instrumentation._applyPatch(layer, (0, utils_1.getLayerPath)(args));\n                return route;\n            };\n        };\n    }\n    /**\n     * Get the patch for Application.use function\n     */\n    _getAppUsePatch(isExpressWithRouterPrototype) {\n        const instrumentation = this;\n        return function (original) {\n            return function use(...args) {\n                // If we access app.router in express 4.x we trigger an assertion error.\n                // This property existed in v3, was removed in v4 and then re-added in v5.\n                const router = isExpressWithRouterPrototype\n                    ? this.router\n                    : this._router;\n                const route = original.apply(this, args);\n                if (router) {\n                    const layer = router.stack[router.stack.length - 1];\n                    instrumentation._applyPatch(layer, (0, utils_1.getLayerPath)(args));\n                }\n                return route;\n            };\n        };\n    }\n    /** Patch each express layer to create span and propagate context */\n    _applyPatch(layer, layerPath) {\n        const instrumentation = this;\n        // avoid patching multiple times the same layer\n        if (layer[internal_types_1.kLayerPatched] === true)\n            return;\n        layer[internal_types_1.kLayerPatched] = true;\n        this._wrap(layer, 'handle', original => {\n            // TODO: instrument error handlers\n            if (original.length === 4)\n                return original;\n            const patched = function (req, res) {\n                const { isLayerPathStored } = (0, utils_1.storeLayerPath)(req, layerPath);\n                const constructedRoute = (0, utils_1.getConstructedRoute)(req);\n                const actualMatchedRoute = (0, utils_1.getActualMatchedRoute)(req);\n                const attributes = {\n                    [semantic_conventions_1.ATTR_HTTP_ROUTE]: actualMatchedRoute,\n                };\n                const metadata = (0, utils_1.getLayerMetadata)(constructedRoute, layer, layerPath);\n                const type = metadata.attributes[AttributeNames_1.AttributeNames.EXPRESS_TYPE];\n                const rpcMetadata = (0, core_1.getRPCMetadata)(api_1.context.active());\n                if (rpcMetadata?.type === core_1.RPCType.HTTP) {\n                    rpcMetadata.route = actualMatchedRoute;\n                }\n                // verify against the config if the layer should be ignored\n                if ((0, utils_1.isLayerIgnored)(metadata.name, type, instrumentation.getConfig())) {\n                    if (type === ExpressLayerType_1.ExpressLayerType.MIDDLEWARE) {\n                        req[internal_types_1._LAYERS_STORE_PROPERTY].pop();\n                    }\n                    return original.apply(this, arguments);\n                }\n                if (api_1.trace.getSpan(api_1.context.active()) === undefined) {\n                    return original.apply(this, arguments);\n                }\n                const spanName = instrumentation._getSpanName({\n                    request: req,\n                    layerType: type,\n                    route: constructedRoute,\n                }, metadata.name);\n                const span = instrumentation.tracer.startSpan(spanName, {\n                    attributes: Object.assign(attributes, metadata.attributes),\n                });\n                const parentContext = api_1.context.active();\n                let currentContext = api_1.trace.setSpan(parentContext, span);\n                const { requestHook } = instrumentation.getConfig();\n                if (requestHook) {\n                    (0, instrumentation_1.safeExecuteInTheMiddle)(() => requestHook(span, {\n                        request: req,\n                        layerType: type,\n                        route: constructedRoute,\n                    }), e => {\n                        if (e) {\n                            api_1.diag.error('express instrumentation: request hook failed', e);\n                        }\n                    }, true);\n                }\n                let spanHasEnded = false;\n                // TODO: Fix router spans (getRouterPath does not work properly) to\n                // have useful names before removing this branch\n                if (metadata.attributes[AttributeNames_1.AttributeNames.EXPRESS_TYPE] ===\n                    ExpressLayerType_1.ExpressLayerType.ROUTER) {\n                    span.end();\n                    spanHasEnded = true;\n                    currentContext = parentContext;\n                }\n                // listener for response.on('finish')\n                const onResponseFinish = () => {\n                    if (spanHasEnded === false) {\n                        spanHasEnded = true;\n                        span.end();\n                    }\n                };\n                // verify we have a callback\n                const args = Array.from(arguments);\n                const callbackIdx = args.findIndex(arg => typeof arg === 'function');\n                if (callbackIdx >= 0) {\n                    arguments[callbackIdx] = function () {\n                        // express considers anything but an empty value, \"route\" or \"router\"\n                        // passed to its callback to be an error\n                        const maybeError = arguments[0];\n                        const isError = ![undefined, null, 'route', 'router'].includes(maybeError);\n                        if (!spanHasEnded && isError) {\n                            const [error, message] = (0, utils_1.asErrorAndMessage)(maybeError);\n                            span.recordException(error);\n                            span.setStatus({\n                                code: api_1.SpanStatusCode.ERROR,\n                                message,\n                            });\n                        }\n                        if (spanHasEnded === false) {\n                            spanHasEnded = true;\n                            req.res?.removeListener('finish', onResponseFinish);\n                            span.end();\n                        }\n                        if (!(req.route && isError) && isLayerPathStored) {\n                            req[internal_types_1._LAYERS_STORE_PROPERTY].pop();\n                        }\n                        const callback = args[callbackIdx];\n                        return api_1.context.bind(parentContext, callback).apply(this, arguments);\n                    };\n                }\n                try {\n                    return api_1.context.bind(currentContext, original).apply(this, arguments);\n                }\n                catch (anyError) {\n                    const [error, message] = (0, utils_1.asErrorAndMessage)(anyError);\n                    span.recordException(error);\n                    span.setStatus({\n                        code: api_1.SpanStatusCode.ERROR,\n                        message,\n                    });\n                    throw anyError;\n                }\n                finally {\n                    /**\n                     * At this point if the callback wasn't called, that means either the\n                     * layer is asynchronous (so it will call the callback later on) or that\n                     * the layer directly ends the http response, so we'll hook into the \"finish\"\n                     * event to handle the later case.\n                     */\n                    if (!spanHasEnded) {\n                        res.once('finish', onResponseFinish);\n                    }\n                }\n            };\n            // `handle` isn't just a regular function in some cases. It also contains\n            // some properties holding metadata and state so we need to proxy them\n            // through through patched function\n            // ref: https://github.com/open-telemetry/opentelemetry-js-contrib/issues/1950\n            // Also some apps/libs do their own patching before OTEL and have these properties\n            // in the proptotype. So we use a `for...in` loop to get own properties and also\n            // any enumerable prop in the prototype chain\n            // ref: https://github.com/open-telemetry/opentelemetry-js-contrib/issues/2271\n            for (const key in original) {\n                Object.defineProperty(patched, key, {\n                    get() {\n                        return original[key];\n                    },\n                    set(value) {\n                        original[key] = value;\n                    },\n                });\n            }\n            return patched;\n        });\n    }\n    _getSpanName(info, defaultName) {\n        const { spanNameHook } = this.getConfig();\n        if (!(spanNameHook instanceof Function)) {\n            return defaultName;\n        }\n        try {\n            return spanNameHook(info, defaultName) ?? defaultName;\n        }\n        catch (err) {\n            api_1.diag.error('express instrumentation: error calling span name rewrite hook', err);\n            return defaultName;\n        }\n    }\n}\nexports.ExpressInstrumentation = ExpressInstrumentation;\n//# sourceMappingURL=instrumentation.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVudGVsZW1ldHJ5K2luc3RydW1lbnRhdGlvbi1leHByZXNzQDAuNTcuMF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjAvbm9kZV9tb2R1bGVzL0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzL2J1aWxkL3NyYy9pbnN0cnVtZW50YXRpb24uanMiLCJtYXBwaW5ncyI6IkFBQWEsQ0FBQyxvREFBb0QseUNBQXlDLDBDQUEwQywrQ0FBK0M7QUFDcE07QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELDhCQUE4QjtBQUM5QixlQUFlLG1CQUFPLENBQUMsa0tBQXFCO0FBQzVDLGNBQWMsbUJBQU8sQ0FBQyxzSUFBb0I7QUFDMUMsMkJBQTJCLG1CQUFPLENBQUMsK05BQTBCO0FBQzdELHlCQUF5QixtQkFBTyxDQUFDLDJOQUF3QjtBQUN6RCxnQkFBZ0IsbUJBQU8sQ0FBQyw2TEFBUztBQUNqQztBQUNBLGtCQUFrQixtQkFBTyxDQUFDLGlNQUFXO0FBQ3JDLDBCQUEwQixtQkFBTyxDQUFDLHFNQUFnQztBQUNsRSwrQkFBK0IsbUJBQU8sQ0FBQywwTEFBcUM7QUFDNUUseUJBQXlCLG1CQUFPLENBQUMsK01BQWtCO0FBQ25EO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG9CQUFvQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSx3QkFBd0IsY0FBYztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZ0JBQWdCLGVBQWU7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQHNvbGlkLWNvbm5lY3Qvd2ViLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9Ab3BlbnRlbGVtZXRyeStpbnN0cnVtZW50YXRpb24tZXhwcmVzc0AwLjU3LjBfQG9wZW50ZWxlbWV0cnkrYXBpQDEuOS4wL25vZGVfbW9kdWxlcy9Ab3BlbnRlbGVtZXRyeS9pbnN0cnVtZW50YXRpb24tZXhwcmVzcy9idWlsZC9zcmMvaW5zdHJ1bWVudGF0aW9uLmpzP2I4NjIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7O2dsb2JhbFRoaXNbXCJfc2VudHJ5UmV3cml0ZXNUdW5uZWxQYXRoXCJdID0gdW5kZWZpbmVkO2dsb2JhbFRoaXNbXCJTRU5UUllfUkVMRUFTRVwiXSA9IHVuZGVmaW5lZDtnbG9iYWxUaGlzW1wiX3NlbnRyeUJhc2VQYXRoXCJdID0gdW5kZWZpbmVkO2dsb2JhbFRoaXNbXCJfc2VudHJ5TmV4dEpzVmVyc2lvblwiXSA9IFwiMTQuMi4zNVwiO2dsb2JhbFRoaXNbXCJfc2VudHJ5UmV3cml0ZUZyYW1lc0Rpc3REaXJcIl0gPSBcIi5uZXh0XCI7XG4vKlxuICogQ29weXJpZ2h0IFRoZSBPcGVuVGVsZW1ldHJ5IEF1dGhvcnNcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwczovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5FeHByZXNzSW5zdHJ1bWVudGF0aW9uID0gdm9pZCAwO1xuY29uc3QgY29yZV8xID0gcmVxdWlyZShcIkBvcGVudGVsZW1ldHJ5L2NvcmVcIik7XG5jb25zdCBhcGlfMSA9IHJlcXVpcmUoXCJAb3BlbnRlbGVtZXRyeS9hcGlcIik7XG5jb25zdCBFeHByZXNzTGF5ZXJUeXBlXzEgPSByZXF1aXJlKFwiLi9lbnVtcy9FeHByZXNzTGF5ZXJUeXBlXCIpO1xuY29uc3QgQXR0cmlidXRlTmFtZXNfMSA9IHJlcXVpcmUoXCIuL2VudW1zL0F0dHJpYnV0ZU5hbWVzXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xuLyoqIEBrbmlwaWdub3JlICovXG5jb25zdCB2ZXJzaW9uXzEgPSByZXF1aXJlKFwiLi92ZXJzaW9uXCIpO1xuY29uc3QgaW5zdHJ1bWVudGF0aW9uXzEgPSByZXF1aXJlKFwiQG9wZW50ZWxlbWV0cnkvaW5zdHJ1bWVudGF0aW9uXCIpO1xuY29uc3Qgc2VtYW50aWNfY29udmVudGlvbnNfMSA9IHJlcXVpcmUoXCJAb3BlbnRlbGVtZXRyeS9zZW1hbnRpYy1jb252ZW50aW9uc1wiKTtcbmNvbnN0IGludGVybmFsX3R5cGVzXzEgPSByZXF1aXJlKFwiLi9pbnRlcm5hbC10eXBlc1wiKTtcbi8qKiBFeHByZXNzIGluc3RydW1lbnRhdGlvbiBmb3IgT3BlblRlbGVtZXRyeSAqL1xuY2xhc3MgRXhwcmVzc0luc3RydW1lbnRhdGlvbiBleHRlbmRzIGluc3RydW1lbnRhdGlvbl8xLkluc3RydW1lbnRhdGlvbkJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHZlcnNpb25fMS5QQUNLQUdFX05BTUUsIHZlcnNpb25fMS5QQUNLQUdFX1ZFUlNJT04sIGNvbmZpZyk7XG4gICAgfVxuICAgIGluaXQoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBuZXcgaW5zdHJ1bWVudGF0aW9uXzEuSW5zdHJ1bWVudGF0aW9uTm9kZU1vZHVsZURlZmluaXRpb24oJ2V4cHJlc3MnLCBbJz49NC4wLjAgPDYnXSwgbW9kdWxlRXhwb3J0cyA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNFeHByZXNzV2l0aFJvdXRlclByb3RvdHlwZSA9IHR5cGVvZiBtb2R1bGVFeHBvcnRzPy5Sb3V0ZXI/LnByb3RvdHlwZT8ucm91dGUgPT09ICdmdW5jdGlvbic7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGVyUHJvdG8gPSBpc0V4cHJlc3NXaXRoUm91dGVyUHJvdG90eXBlXG4gICAgICAgICAgICAgICAgICAgID8gbW9kdWxlRXhwb3J0cy5Sb3V0ZXIucHJvdG90eXBlIC8vIEV4cHJlc3MgdjVcbiAgICAgICAgICAgICAgICAgICAgOiBtb2R1bGVFeHBvcnRzLlJvdXRlcjsgLy8gRXhwcmVzcyB2NFxuICAgICAgICAgICAgICAgIC8vIHBhdGNoIGV4cHJlc3MuUm91dGVyLnJvdXRlXG4gICAgICAgICAgICAgICAgaWYgKCgwLCBpbnN0cnVtZW50YXRpb25fMS5pc1dyYXBwZWQpKHJvdXRlclByb3RvLnJvdXRlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl91bndyYXAocm91dGVyUHJvdG8sICdyb3V0ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl93cmFwKHJvdXRlclByb3RvLCAncm91dGUnLCB0aGlzLl9nZXRSb3V0ZVBhdGNoKCkpO1xuICAgICAgICAgICAgICAgIC8vIHBhdGNoIGV4cHJlc3MuUm91dGVyLnVzZVxuICAgICAgICAgICAgICAgIGlmICgoMCwgaW5zdHJ1bWVudGF0aW9uXzEuaXNXcmFwcGVkKShyb3V0ZXJQcm90by51c2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Vud3JhcChyb3V0ZXJQcm90bywgJ3VzZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgIHRoaXMuX3dyYXAocm91dGVyUHJvdG8sICd1c2UnLCB0aGlzLl9nZXRSb3V0ZXJVc2VQYXRjaCgpKTtcbiAgICAgICAgICAgICAgICAvLyBwYXRjaCBleHByZXNzLkFwcGxpY2F0aW9uLnVzZVxuICAgICAgICAgICAgICAgIGlmICgoMCwgaW5zdHJ1bWVudGF0aW9uXzEuaXNXcmFwcGVkKShtb2R1bGVFeHBvcnRzLmFwcGxpY2F0aW9uLnVzZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdW53cmFwKG1vZHVsZUV4cG9ydHMuYXBwbGljYXRpb24sICd1c2UnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5fd3JhcChtb2R1bGVFeHBvcnRzLmFwcGxpY2F0aW9uLCAndXNlJywgXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICB0aGlzLl9nZXRBcHBVc2VQYXRjaChpc0V4cHJlc3NXaXRoUm91dGVyUHJvdG90eXBlKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vZHVsZUV4cG9ydHM7XG4gICAgICAgICAgICB9LCBtb2R1bGVFeHBvcnRzID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobW9kdWxlRXhwb3J0cyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgY29uc3QgaXNFeHByZXNzV2l0aFJvdXRlclByb3RvdHlwZSA9IHR5cGVvZiBtb2R1bGVFeHBvcnRzPy5Sb3V0ZXI/LnByb3RvdHlwZT8ucm91dGUgPT09ICdmdW5jdGlvbic7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGVyUHJvdG8gPSBpc0V4cHJlc3NXaXRoUm91dGVyUHJvdG90eXBlXG4gICAgICAgICAgICAgICAgICAgID8gbW9kdWxlRXhwb3J0cy5Sb3V0ZXIucHJvdG90eXBlXG4gICAgICAgICAgICAgICAgICAgIDogbW9kdWxlRXhwb3J0cy5Sb3V0ZXI7XG4gICAgICAgICAgICAgICAgdGhpcy5fdW53cmFwKHJvdXRlclByb3RvLCAncm91dGUnKTtcbiAgICAgICAgICAgICAgICB0aGlzLl91bndyYXAocm91dGVyUHJvdG8sICd1c2UnKTtcbiAgICAgICAgICAgICAgICB0aGlzLl91bndyYXAobW9kdWxlRXhwb3J0cy5hcHBsaWNhdGlvbiwgJ3VzZScpO1xuICAgICAgICAgICAgfSksXG4gICAgICAgIF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcGF0Y2ggZm9yIFJvdXRlci5yb3V0ZSBmdW5jdGlvblxuICAgICAqL1xuICAgIF9nZXRSb3V0ZVBhdGNoKCkge1xuICAgICAgICBjb25zdCBpbnN0cnVtZW50YXRpb24gPSB0aGlzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG9yaWdpbmFsKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gcm91dGVfdHJhY2UoLi4uYXJncykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvdXRlID0gb3JpZ2luYWwuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgICAgICAgICAgY29uc3QgbGF5ZXIgPSB0aGlzLnN0YWNrW3RoaXMuc3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgaW5zdHJ1bWVudGF0aW9uLl9hcHBseVBhdGNoKGxheWVyLCAoMCwgdXRpbHNfMS5nZXRMYXllclBhdGgpKGFyZ3MpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcm91dGU7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHBhdGNoIGZvciBSb3V0ZXIudXNlIGZ1bmN0aW9uXG4gICAgICovXG4gICAgX2dldFJvdXRlclVzZVBhdGNoKCkge1xuICAgICAgICBjb25zdCBpbnN0cnVtZW50YXRpb24gPSB0aGlzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG9yaWdpbmFsKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gdXNlKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZSA9IG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxheWVyID0gdGhpcy5zdGFja1t0aGlzLnN0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgIGluc3RydW1lbnRhdGlvbi5fYXBwbHlQYXRjaChsYXllciwgKDAsIHV0aWxzXzEuZ2V0TGF5ZXJQYXRoKShhcmdzKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvdXRlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwYXRjaCBmb3IgQXBwbGljYXRpb24udXNlIGZ1bmN0aW9uXG4gICAgICovXG4gICAgX2dldEFwcFVzZVBhdGNoKGlzRXhwcmVzc1dpdGhSb3V0ZXJQcm90b3R5cGUpIHtcbiAgICAgICAgY29uc3QgaW5zdHJ1bWVudGF0aW9uID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChvcmlnaW5hbCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHVzZSguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgd2UgYWNjZXNzIGFwcC5yb3V0ZXIgaW4gZXhwcmVzcyA0Lnggd2UgdHJpZ2dlciBhbiBhc3NlcnRpb24gZXJyb3IuXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBwcm9wZXJ0eSBleGlzdGVkIGluIHYzLCB3YXMgcmVtb3ZlZCBpbiB2NCBhbmQgdGhlbiByZS1hZGRlZCBpbiB2NS5cbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZXIgPSBpc0V4cHJlc3NXaXRoUm91dGVyUHJvdG90eXBlXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5yb3V0ZXJcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9yb3V0ZXI7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAocm91dGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxheWVyID0gcm91dGVyLnN0YWNrW3JvdXRlci5zdGFjay5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgaW5zdHJ1bWVudGF0aW9uLl9hcHBseVBhdGNoKGxheWVyLCAoMCwgdXRpbHNfMS5nZXRMYXllclBhdGgpKGFyZ3MpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvdXRlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqIFBhdGNoIGVhY2ggZXhwcmVzcyBsYXllciB0byBjcmVhdGUgc3BhbiBhbmQgcHJvcGFnYXRlIGNvbnRleHQgKi9cbiAgICBfYXBwbHlQYXRjaChsYXllciwgbGF5ZXJQYXRoKSB7XG4gICAgICAgIGNvbnN0IGluc3RydW1lbnRhdGlvbiA9IHRoaXM7XG4gICAgICAgIC8vIGF2b2lkIHBhdGNoaW5nIG11bHRpcGxlIHRpbWVzIHRoZSBzYW1lIGxheWVyXG4gICAgICAgIGlmIChsYXllcltpbnRlcm5hbF90eXBlc18xLmtMYXllclBhdGNoZWRdID09PSB0cnVlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsYXllcltpbnRlcm5hbF90eXBlc18xLmtMYXllclBhdGNoZWRdID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fd3JhcChsYXllciwgJ2hhbmRsZScsIG9yaWdpbmFsID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE86IGluc3RydW1lbnQgZXJyb3IgaGFuZGxlcnNcbiAgICAgICAgICAgIGlmIChvcmlnaW5hbC5sZW5ndGggPT09IDQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsO1xuICAgICAgICAgICAgY29uc3QgcGF0Y2hlZCA9IGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgaXNMYXllclBhdGhTdG9yZWQgfSA9ICgwLCB1dGlsc18xLnN0b3JlTGF5ZXJQYXRoKShyZXEsIGxheWVyUGF0aCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY29uc3RydWN0ZWRSb3V0ZSA9ICgwLCB1dGlsc18xLmdldENvbnN0cnVjdGVkUm91dGUpKHJlcSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYWN0dWFsTWF0Y2hlZFJvdXRlID0gKDAsIHV0aWxzXzEuZ2V0QWN0dWFsTWF0Y2hlZFJvdXRlKShyZXEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSB7XG4gICAgICAgICAgICAgICAgICAgIFtzZW1hbnRpY19jb252ZW50aW9uc18xLkFUVFJfSFRUUF9ST1VURV06IGFjdHVhbE1hdGNoZWRSb3V0ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gKDAsIHV0aWxzXzEuZ2V0TGF5ZXJNZXRhZGF0YSkoY29uc3RydWN0ZWRSb3V0ZSwgbGF5ZXIsIGxheWVyUGF0aCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IG1ldGFkYXRhLmF0dHJpYnV0ZXNbQXR0cmlidXRlTmFtZXNfMS5BdHRyaWJ1dGVOYW1lcy5FWFBSRVNTX1RZUEVdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJwY01ldGFkYXRhID0gKDAsIGNvcmVfMS5nZXRSUENNZXRhZGF0YSkoYXBpXzEuY29udGV4dC5hY3RpdmUoKSk7XG4gICAgICAgICAgICAgICAgaWYgKHJwY01ldGFkYXRhPy50eXBlID09PSBjb3JlXzEuUlBDVHlwZS5IVFRQKSB7XG4gICAgICAgICAgICAgICAgICAgIHJwY01ldGFkYXRhLnJvdXRlID0gYWN0dWFsTWF0Y2hlZFJvdXRlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyB2ZXJpZnkgYWdhaW5zdCB0aGUgY29uZmlnIGlmIHRoZSBsYXllciBzaG91bGQgYmUgaWdub3JlZFxuICAgICAgICAgICAgICAgIGlmICgoMCwgdXRpbHNfMS5pc0xheWVySWdub3JlZCkobWV0YWRhdGEubmFtZSwgdHlwZSwgaW5zdHJ1bWVudGF0aW9uLmdldENvbmZpZygpKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gRXhwcmVzc0xheWVyVHlwZV8xLkV4cHJlc3NMYXllclR5cGUuTUlERExFV0FSRSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxW2ludGVybmFsX3R5cGVzXzEuX0xBWUVSU19TVE9SRV9QUk9QRVJUWV0ucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhcGlfMS50cmFjZS5nZXRTcGFuKGFwaV8xLmNvbnRleHQuYWN0aXZlKCkpID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHNwYW5OYW1lID0gaW5zdHJ1bWVudGF0aW9uLl9nZXRTcGFuTmFtZSh7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3Q6IHJlcSxcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJUeXBlOiB0eXBlLFxuICAgICAgICAgICAgICAgICAgICByb3V0ZTogY29uc3RydWN0ZWRSb3V0ZSxcbiAgICAgICAgICAgICAgICB9LCBtZXRhZGF0YS5uYW1lKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzcGFuID0gaW5zdHJ1bWVudGF0aW9uLnRyYWNlci5zdGFydFNwYW4oc3Bhbk5hbWUsIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogT2JqZWN0LmFzc2lnbihhdHRyaWJ1dGVzLCBtZXRhZGF0YS5hdHRyaWJ1dGVzKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRDb250ZXh0ID0gYXBpXzEuY29udGV4dC5hY3RpdmUoKTtcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudENvbnRleHQgPSBhcGlfMS50cmFjZS5zZXRTcGFuKHBhcmVudENvbnRleHQsIHNwYW4pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgcmVxdWVzdEhvb2sgfSA9IGluc3RydW1lbnRhdGlvbi5nZXRDb25maWcoKTtcbiAgICAgICAgICAgICAgICBpZiAocmVxdWVzdEhvb2spIHtcbiAgICAgICAgICAgICAgICAgICAgKDAsIGluc3RydW1lbnRhdGlvbl8xLnNhZmVFeGVjdXRlSW5UaGVNaWRkbGUpKCgpID0+IHJlcXVlc3RIb29rKHNwYW4sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3Q6IHJlcSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyVHlwZTogdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlOiBjb25zdHJ1Y3RlZFJvdXRlLFxuICAgICAgICAgICAgICAgICAgICB9KSwgZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaV8xLmRpYWcuZXJyb3IoJ2V4cHJlc3MgaW5zdHJ1bWVudGF0aW9uOiByZXF1ZXN0IGhvb2sgZmFpbGVkJywgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgc3Bhbkhhc0VuZGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogRml4IHJvdXRlciBzcGFucyAoZ2V0Um91dGVyUGF0aCBkb2VzIG5vdCB3b3JrIHByb3Blcmx5KSB0b1xuICAgICAgICAgICAgICAgIC8vIGhhdmUgdXNlZnVsIG5hbWVzIGJlZm9yZSByZW1vdmluZyB0aGlzIGJyYW5jaFxuICAgICAgICAgICAgICAgIGlmIChtZXRhZGF0YS5hdHRyaWJ1dGVzW0F0dHJpYnV0ZU5hbWVzXzEuQXR0cmlidXRlTmFtZXMuRVhQUkVTU19UWVBFXSA9PT1cbiAgICAgICAgICAgICAgICAgICAgRXhwcmVzc0xheWVyVHlwZV8xLkV4cHJlc3NMYXllclR5cGUuUk9VVEVSKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5IYXNFbmRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDb250ZXh0ID0gcGFyZW50Q29udGV4dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gbGlzdGVuZXIgZm9yIHJlc3BvbnNlLm9uKCdmaW5pc2gnKVxuICAgICAgICAgICAgICAgIGNvbnN0IG9uUmVzcG9uc2VGaW5pc2ggPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzcGFuSGFzRW5kZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFuSGFzRW5kZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gdmVyaWZ5IHdlIGhhdmUgYSBjYWxsYmFja1xuICAgICAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBBcnJheS5mcm9tKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FsbGJhY2tJZHggPSBhcmdzLmZpbmRJbmRleChhcmcgPT4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJyk7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrSWR4ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzW2NhbGxiYWNrSWR4XSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV4cHJlc3MgY29uc2lkZXJzIGFueXRoaW5nIGJ1dCBhbiBlbXB0eSB2YWx1ZSwgXCJyb3V0ZVwiIG9yIFwicm91dGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhc3NlZCB0byBpdHMgY2FsbGJhY2sgdG8gYmUgYW4gZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1heWJlRXJyb3IgPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0Vycm9yID0gIVt1bmRlZmluZWQsIG51bGwsICdyb3V0ZScsICdyb3V0ZXInXS5pbmNsdWRlcyhtYXliZUVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3Bhbkhhc0VuZGVkICYmIGlzRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBbZXJyb3IsIG1lc3NhZ2VdID0gKDAsIHV0aWxzXzEuYXNFcnJvckFuZE1lc3NhZ2UpKG1heWJlRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4ucmVjb3JkRXhjZXB0aW9uKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuLnNldFN0YXR1cyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IGFwaV8xLlNwYW5TdGF0dXNDb2RlLkVSUk9SLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNwYW5IYXNFbmRlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuSGFzRW5kZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5yZXM/LnJlbW92ZUxpc3RlbmVyKCdmaW5pc2gnLCBvblJlc3BvbnNlRmluaXNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVxLnJvdXRlICYmIGlzRXJyb3IpICYmIGlzTGF5ZXJQYXRoU3RvcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxW2ludGVybmFsX3R5cGVzXzEuX0xBWUVSU19TVE9SRV9QUk9QRVJUWV0ucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWxsYmFjayA9IGFyZ3NbY2FsbGJhY2tJZHhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV8xLmNvbnRleHQuYmluZChwYXJlbnRDb250ZXh0LCBjYWxsYmFjaykuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV8xLmNvbnRleHQuYmluZChjdXJyZW50Q29udGV4dCwgb3JpZ2luYWwpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChhbnlFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBbZXJyb3IsIG1lc3NhZ2VdID0gKDAsIHV0aWxzXzEuYXNFcnJvckFuZE1lc3NhZ2UpKGFueUVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5yZWNvcmRFeGNlcHRpb24oZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNldFN0YXR1cyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBhcGlfMS5TcGFuU3RhdHVzQ29kZS5FUlJPUixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBhbnlFcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBBdCB0aGlzIHBvaW50IGlmIHRoZSBjYWxsYmFjayB3YXNuJ3QgY2FsbGVkLCB0aGF0IG1lYW5zIGVpdGhlciB0aGVcbiAgICAgICAgICAgICAgICAgICAgICogbGF5ZXIgaXMgYXN5bmNocm9ub3VzIChzbyBpdCB3aWxsIGNhbGwgdGhlIGNhbGxiYWNrIGxhdGVyIG9uKSBvciB0aGF0XG4gICAgICAgICAgICAgICAgICAgICAqIHRoZSBsYXllciBkaXJlY3RseSBlbmRzIHRoZSBodHRwIHJlc3BvbnNlLCBzbyB3ZSdsbCBob29rIGludG8gdGhlIFwiZmluaXNoXCJcbiAgICAgICAgICAgICAgICAgICAgICogZXZlbnQgdG8gaGFuZGxlIHRoZSBsYXRlciBjYXNlLlxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzcGFuSGFzRW5kZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5vbmNlKCdmaW5pc2gnLCBvblJlc3BvbnNlRmluaXNoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBgaGFuZGxlYCBpc24ndCBqdXN0IGEgcmVndWxhciBmdW5jdGlvbiBpbiBzb21lIGNhc2VzLiBJdCBhbHNvIGNvbnRhaW5zXG4gICAgICAgICAgICAvLyBzb21lIHByb3BlcnRpZXMgaG9sZGluZyBtZXRhZGF0YSBhbmQgc3RhdGUgc28gd2UgbmVlZCB0byBwcm94eSB0aGVtXG4gICAgICAgICAgICAvLyB0aHJvdWdoIHRocm91Z2ggcGF0Y2hlZCBmdW5jdGlvblxuICAgICAgICAgICAgLy8gcmVmOiBodHRwczovL2dpdGh1Yi5jb20vb3Blbi10ZWxlbWV0cnkvb3BlbnRlbGVtZXRyeS1qcy1jb250cmliL2lzc3Vlcy8xOTUwXG4gICAgICAgICAgICAvLyBBbHNvIHNvbWUgYXBwcy9saWJzIGRvIHRoZWlyIG93biBwYXRjaGluZyBiZWZvcmUgT1RFTCBhbmQgaGF2ZSB0aGVzZSBwcm9wZXJ0aWVzXG4gICAgICAgICAgICAvLyBpbiB0aGUgcHJvcHRvdHlwZS4gU28gd2UgdXNlIGEgYGZvci4uLmluYCBsb29wIHRvIGdldCBvd24gcHJvcGVydGllcyBhbmQgYWxzb1xuICAgICAgICAgICAgLy8gYW55IGVudW1lcmFibGUgcHJvcCBpbiB0aGUgcHJvdG90eXBlIGNoYWluXG4gICAgICAgICAgICAvLyByZWY6IGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuLXRlbGVtZXRyeS9vcGVudGVsZW1ldHJ5LWpzLWNvbnRyaWIvaXNzdWVzLzIyNzFcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9yaWdpbmFsKSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBhdGNoZWQsIGtleSwge1xuICAgICAgICAgICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGF0Y2hlZDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9nZXRTcGFuTmFtZShpbmZvLCBkZWZhdWx0TmFtZSkge1xuICAgICAgICBjb25zdCB7IHNwYW5OYW1lSG9vayB9ID0gdGhpcy5nZXRDb25maWcoKTtcbiAgICAgICAgaWYgKCEoc3Bhbk5hbWVIb29rIGluc3RhbmNlb2YgRnVuY3Rpb24pKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdE5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBzcGFuTmFtZUhvb2soaW5mbywgZGVmYXVsdE5hbWUpID8/IGRlZmF1bHROYW1lO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGFwaV8xLmRpYWcuZXJyb3IoJ2V4cHJlc3MgaW5zdHJ1bWVudGF0aW9uOiBlcnJvciBjYWxsaW5nIHNwYW4gbmFtZSByZXdyaXRlIGhvb2snLCBlcnIpO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHROYW1lO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5FeHByZXNzSW5zdHJ1bWVudGF0aW9uID0gRXhwcmVzc0luc3RydW1lbnRhdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluc3RydW1lbnRhdGlvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/instrumentation.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/enums/AttributeNames.js":
/*!*********************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/enums/AttributeNames.js ***!
  \*********************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.AttributeNames = void 0;\n/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar AttributeNames;\n(function (AttributeNames) {\n    AttributeNames[\"EXPRESS_TYPE\"] = \"express.type\";\n    AttributeNames[\"EXPRESS_NAME\"] = \"express.name\";\n})(AttributeNames = exports.AttributeNames || (exports.AttributeNames = {}));\n//# sourceMappingURL=AttributeNames.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVudGVsZW1ldHJ5K2luc3RydW1lbnRhdGlvbi1leHByZXNzQDAuNTcuMF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjAvbm9kZV9tb2R1bGVzL0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzL2J1aWxkL3NyYy9lbnVtcy9BdHRyaWJ1dGVOYW1lcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDhDQUE4QyxzQkFBc0IsS0FBSztBQUMxRSIsInNvdXJjZXMiOlsid2VicGFjazovL0Bzb2xpZC1jb25uZWN0L3dlYi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW50ZWxlbWV0cnkraW5zdHJ1bWVudGF0aW9uLWV4cHJlc3NAMC41Ny4wX0BvcGVudGVsZW1ldHJ5K2FwaUAxLjkuMC9ub2RlX21vZHVsZXMvQG9wZW50ZWxlbWV0cnkvaW5zdHJ1bWVudGF0aW9uLWV4cHJlc3MvYnVpbGQvc3JjL2VudW1zL0F0dHJpYnV0ZU5hbWVzLmpzP2E1ZjQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkF0dHJpYnV0ZU5hbWVzID0gdm9pZCAwO1xuLypcbiAqIENvcHlyaWdodCBUaGUgT3BlblRlbGVtZXRyeSBBdXRob3JzXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbnZhciBBdHRyaWJ1dGVOYW1lcztcbihmdW5jdGlvbiAoQXR0cmlidXRlTmFtZXMpIHtcbiAgICBBdHRyaWJ1dGVOYW1lc1tcIkVYUFJFU1NfVFlQRVwiXSA9IFwiZXhwcmVzcy50eXBlXCI7XG4gICAgQXR0cmlidXRlTmFtZXNbXCJFWFBSRVNTX05BTUVcIl0gPSBcImV4cHJlc3MubmFtZVwiO1xufSkoQXR0cmlidXRlTmFtZXMgPSBleHBvcnRzLkF0dHJpYnV0ZU5hbWVzIHx8IChleHBvcnRzLkF0dHJpYnV0ZU5hbWVzID0ge30pKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUF0dHJpYnV0ZU5hbWVzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/enums/AttributeNames.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/enums/ExpressLayerType.js":
/*!***********************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/enums/ExpressLayerType.js ***!
  \***********************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ExpressLayerType = void 0;\n/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar ExpressLayerType;\n(function (ExpressLayerType) {\n    ExpressLayerType[\"ROUTER\"] = \"router\";\n    ExpressLayerType[\"MIDDLEWARE\"] = \"middleware\";\n    ExpressLayerType[\"REQUEST_HANDLER\"] = \"request_handler\";\n})(ExpressLayerType = exports.ExpressLayerType || (exports.ExpressLayerType = {}));\n//# sourceMappingURL=ExpressLayerType.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVudGVsZW1ldHJ5K2luc3RydW1lbnRhdGlvbi1leHByZXNzQDAuNTcuMF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjAvbm9kZV9tb2R1bGVzL0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzL2J1aWxkL3NyYy9lbnVtcy9FeHByZXNzTGF5ZXJUeXBlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxrREFBa0Qsd0JBQXdCLEtBQUs7QUFDaEYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Ac29saWQtY29ubmVjdC93ZWIvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVudGVsZW1ldHJ5K2luc3RydW1lbnRhdGlvbi1leHByZXNzQDAuNTcuMF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjAvbm9kZV9tb2R1bGVzL0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzL2J1aWxkL3NyYy9lbnVtcy9FeHByZXNzTGF5ZXJUeXBlLmpzP2U0MjUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkV4cHJlc3NMYXllclR5cGUgPSB2b2lkIDA7XG4vKlxuICogQ29weXJpZ2h0IFRoZSBPcGVuVGVsZW1ldHJ5IEF1dGhvcnNcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwczovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIEV4cHJlc3NMYXllclR5cGU7XG4oZnVuY3Rpb24gKEV4cHJlc3NMYXllclR5cGUpIHtcbiAgICBFeHByZXNzTGF5ZXJUeXBlW1wiUk9VVEVSXCJdID0gXCJyb3V0ZXJcIjtcbiAgICBFeHByZXNzTGF5ZXJUeXBlW1wiTUlERExFV0FSRVwiXSA9IFwibWlkZGxld2FyZVwiO1xuICAgIEV4cHJlc3NMYXllclR5cGVbXCJSRVFVRVNUX0hBTkRMRVJcIl0gPSBcInJlcXVlc3RfaGFuZGxlclwiO1xufSkoRXhwcmVzc0xheWVyVHlwZSA9IGV4cG9ydHMuRXhwcmVzc0xheWVyVHlwZSB8fCAoZXhwb3J0cy5FeHByZXNzTGF5ZXJUeXBlID0ge30pKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV4cHJlc3NMYXllclR5cGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/enums/ExpressLayerType.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/index.js":
/*!******************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/index.js ***!
  \******************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.AttributeNames = exports.ExpressLayerType = exports.ExpressInstrumentation = void 0;\nvar instrumentation_1 = __webpack_require__(/*! ./instrumentation */ \"(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/instrumentation.js\");\nObject.defineProperty(exports, \"ExpressInstrumentation\", ({ enumerable: true, get: function () { return instrumentation_1.ExpressInstrumentation; } }));\nvar ExpressLayerType_1 = __webpack_require__(/*! ./enums/ExpressLayerType */ \"(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/enums/ExpressLayerType.js\");\nObject.defineProperty(exports, \"ExpressLayerType\", ({ enumerable: true, get: function () { return ExpressLayerType_1.ExpressLayerType; } }));\nvar AttributeNames_1 = __webpack_require__(/*! ./enums/AttributeNames */ \"(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/enums/AttributeNames.js\");\nObject.defineProperty(exports, \"AttributeNames\", ({ enumerable: true, get: function () { return AttributeNames_1.AttributeNames; } }));\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVudGVsZW1ldHJ5K2luc3RydW1lbnRhdGlvbi1leHByZXNzQDAuNTcuMF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjAvbm9kZV9tb2R1bGVzL0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzL2J1aWxkL3NyYy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxzQkFBc0IsR0FBRyx3QkFBd0IsR0FBRyw4QkFBOEI7QUFDbEYsd0JBQXdCLG1CQUFPLENBQUMsaU5BQW1CO0FBQ25ELDBEQUF5RCxFQUFFLHFDQUFxQyxvREFBb0QsRUFBQztBQUNySix5QkFBeUIsbUJBQU8sQ0FBQywrTkFBMEI7QUFDM0Qsb0RBQW1ELEVBQUUscUNBQXFDLCtDQUErQyxFQUFDO0FBQzFJLHVCQUF1QixtQkFBTyxDQUFDLDJOQUF3QjtBQUN2RCxrREFBaUQsRUFBRSxxQ0FBcUMsMkNBQTJDLEVBQUM7QUFDcEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Ac29saWQtY29ubmVjdC93ZWIvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVudGVsZW1ldHJ5K2luc3RydW1lbnRhdGlvbi1leHByZXNzQDAuNTcuMF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjAvbm9kZV9tb2R1bGVzL0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzL2J1aWxkL3NyYy9pbmRleC5qcz8wNzdjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLypcbiAqIENvcHlyaWdodCBUaGUgT3BlblRlbGVtZXRyeSBBdXRob3JzXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQXR0cmlidXRlTmFtZXMgPSBleHBvcnRzLkV4cHJlc3NMYXllclR5cGUgPSBleHBvcnRzLkV4cHJlc3NJbnN0cnVtZW50YXRpb24gPSB2b2lkIDA7XG52YXIgaW5zdHJ1bWVudGF0aW9uXzEgPSByZXF1aXJlKFwiLi9pbnN0cnVtZW50YXRpb25cIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJFeHByZXNzSW5zdHJ1bWVudGF0aW9uXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBpbnN0cnVtZW50YXRpb25fMS5FeHByZXNzSW5zdHJ1bWVudGF0aW9uOyB9IH0pO1xudmFyIEV4cHJlc3NMYXllclR5cGVfMSA9IHJlcXVpcmUoXCIuL2VudW1zL0V4cHJlc3NMYXllclR5cGVcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJFeHByZXNzTGF5ZXJUeXBlXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBFeHByZXNzTGF5ZXJUeXBlXzEuRXhwcmVzc0xheWVyVHlwZTsgfSB9KTtcbnZhciBBdHRyaWJ1dGVOYW1lc18xID0gcmVxdWlyZShcIi4vZW51bXMvQXR0cmlidXRlTmFtZXNcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJBdHRyaWJ1dGVOYW1lc1wiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gQXR0cmlidXRlTmFtZXNfMS5BdHRyaWJ1dGVOYW1lczsgfSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/index.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/internal-types.js":
/*!***************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/internal-types.js ***!
  \***************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports._LAYERS_STORE_PROPERTY = exports.kLayerPatched = void 0;\n/**\n * This symbol is used to mark express layer as being already instrumented\n * since its possible to use a given layer multiple times (ex: middlewares)\n */\nexports.kLayerPatched = Symbol('express-layer-patched');\n/**\n * This const define where on the `request` object the Instrumentation will mount the\n * current stack of express layer.\n *\n * It is necessary because express doesn't store the different layers\n * (ie: middleware, router etc) that it called to get to the current layer.\n * Given that, the only way to know the route of a given layer is to\n * store the path of where each previous layer has been mounted.\n *\n * ex: bodyParser > auth middleware > /users router > get /:id\n *  in this case the stack would be: [\"/users\", \"/:id\"]\n *\n * ex2: bodyParser > /api router > /v1 router > /users router > get /:id\n *  stack: [\"/api\", \"/v1\", \"/users\", \":id\"]\n *\n */\nexports._LAYERS_STORE_PROPERTY = '__ot_middlewares';\n//# sourceMappingURL=internal-types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVudGVsZW1ldHJ5K2luc3RydW1lbnRhdGlvbi1leHByZXNzQDAuNTcuMF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjAvbm9kZV9tb2R1bGVzL0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzL2J1aWxkL3NyYy9pbnRlcm5hbC10eXBlcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCw4QkFBOEIsR0FBRyxxQkFBcUI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Ac29saWQtY29ubmVjdC93ZWIvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVudGVsZW1ldHJ5K2luc3RydW1lbnRhdGlvbi1leHByZXNzQDAuNTcuMF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjAvbm9kZV9tb2R1bGVzL0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzL2J1aWxkL3NyYy9pbnRlcm5hbC10eXBlcy5qcz9iYTM0Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLypcbiAqIENvcHlyaWdodCBUaGUgT3BlblRlbGVtZXRyeSBBdXRob3JzXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuX0xBWUVSU19TVE9SRV9QUk9QRVJUWSA9IGV4cG9ydHMua0xheWVyUGF0Y2hlZCA9IHZvaWQgMDtcbi8qKlxuICogVGhpcyBzeW1ib2wgaXMgdXNlZCB0byBtYXJrIGV4cHJlc3MgbGF5ZXIgYXMgYmVpbmcgYWxyZWFkeSBpbnN0cnVtZW50ZWRcbiAqIHNpbmNlIGl0cyBwb3NzaWJsZSB0byB1c2UgYSBnaXZlbiBsYXllciBtdWx0aXBsZSB0aW1lcyAoZXg6IG1pZGRsZXdhcmVzKVxuICovXG5leHBvcnRzLmtMYXllclBhdGNoZWQgPSBTeW1ib2woJ2V4cHJlc3MtbGF5ZXItcGF0Y2hlZCcpO1xuLyoqXG4gKiBUaGlzIGNvbnN0IGRlZmluZSB3aGVyZSBvbiB0aGUgYHJlcXVlc3RgIG9iamVjdCB0aGUgSW5zdHJ1bWVudGF0aW9uIHdpbGwgbW91bnQgdGhlXG4gKiBjdXJyZW50IHN0YWNrIG9mIGV4cHJlc3MgbGF5ZXIuXG4gKlxuICogSXQgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgZXhwcmVzcyBkb2Vzbid0IHN0b3JlIHRoZSBkaWZmZXJlbnQgbGF5ZXJzXG4gKiAoaWU6IG1pZGRsZXdhcmUsIHJvdXRlciBldGMpIHRoYXQgaXQgY2FsbGVkIHRvIGdldCB0byB0aGUgY3VycmVudCBsYXllci5cbiAqIEdpdmVuIHRoYXQsIHRoZSBvbmx5IHdheSB0byBrbm93IHRoZSByb3V0ZSBvZiBhIGdpdmVuIGxheWVyIGlzIHRvXG4gKiBzdG9yZSB0aGUgcGF0aCBvZiB3aGVyZSBlYWNoIHByZXZpb3VzIGxheWVyIGhhcyBiZWVuIG1vdW50ZWQuXG4gKlxuICogZXg6IGJvZHlQYXJzZXIgPiBhdXRoIG1pZGRsZXdhcmUgPiAvdXNlcnMgcm91dGVyID4gZ2V0IC86aWRcbiAqICBpbiB0aGlzIGNhc2UgdGhlIHN0YWNrIHdvdWxkIGJlOiBbXCIvdXNlcnNcIiwgXCIvOmlkXCJdXG4gKlxuICogZXgyOiBib2R5UGFyc2VyID4gL2FwaSByb3V0ZXIgPiAvdjEgcm91dGVyID4gL3VzZXJzIHJvdXRlciA+IGdldCAvOmlkXG4gKiAgc3RhY2s6IFtcIi9hcGlcIiwgXCIvdjFcIiwgXCIvdXNlcnNcIiwgXCI6aWRcIl1cbiAqXG4gKi9cbmV4cG9ydHMuX0xBWUVSU19TVE9SRV9QUk9QRVJUWSA9ICdfX290X21pZGRsZXdhcmVzJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVybmFsLXR5cGVzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/internal-types.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/utils.js":
/*!******************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/utils.js ***!
  \******************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.getActualMatchedRoute = exports.getConstructedRoute = exports.getLayerPath = exports.asErrorAndMessage = exports.isLayerIgnored = exports.getLayerMetadata = exports.getRouterPath = exports.storeLayerPath = void 0;\nconst ExpressLayerType_1 = __webpack_require__(/*! ./enums/ExpressLayerType */ \"(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/enums/ExpressLayerType.js\");\nconst AttributeNames_1 = __webpack_require__(/*! ./enums/AttributeNames */ \"(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/enums/AttributeNames.js\");\nconst internal_types_1 = __webpack_require__(/*! ./internal-types */ \"(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/internal-types.js\");\n/**\n * Store layers path in the request to be able to construct route later\n * @param request The request where\n * @param [value] the value to push into the array\n */\nconst storeLayerPath = (request, value) => {\n    if (Array.isArray(request[internal_types_1._LAYERS_STORE_PROPERTY]) === false) {\n        Object.defineProperty(request, internal_types_1._LAYERS_STORE_PROPERTY, {\n            enumerable: false,\n            value: [],\n        });\n    }\n    if (value === undefined)\n        return { isLayerPathStored: false };\n    request[internal_types_1._LAYERS_STORE_PROPERTY].push(value);\n    return { isLayerPathStored: true };\n};\nexports.storeLayerPath = storeLayerPath;\n/**\n * Recursively search the router path from layer stack\n * @param path The path to reconstruct\n * @param layer The layer to reconstruct from\n * @returns The reconstructed path\n */\nconst getRouterPath = (path, layer) => {\n    const stackLayer = layer.handle?.stack?.[0];\n    if (stackLayer?.route?.path) {\n        return `${path}${stackLayer.route.path}`;\n    }\n    if (stackLayer?.handle?.stack) {\n        return (0, exports.getRouterPath)(path, stackLayer);\n    }\n    return path;\n};\nexports.getRouterPath = getRouterPath;\n/**\n * Parse express layer context to retrieve a name and attributes.\n * @param route The route of the layer\n * @param layer Express layer\n * @param [layerPath] if present, the path on which the layer has been mounted\n */\nconst getLayerMetadata = (route, layer, layerPath) => {\n    if (layer.name === 'router') {\n        const maybeRouterPath = (0, exports.getRouterPath)('', layer);\n        const extractedRouterPath = maybeRouterPath\n            ? maybeRouterPath\n            : layerPath || route || '/';\n        return {\n            attributes: {\n                [AttributeNames_1.AttributeNames.EXPRESS_NAME]: extractedRouterPath,\n                [AttributeNames_1.AttributeNames.EXPRESS_TYPE]: ExpressLayerType_1.ExpressLayerType.ROUTER,\n            },\n            name: `router - ${extractedRouterPath}`,\n        };\n    }\n    else if (layer.name === 'bound dispatch' || layer.name === 'handle') {\n        return {\n            attributes: {\n                [AttributeNames_1.AttributeNames.EXPRESS_NAME]: (route || layerPath) ?? 'request handler',\n                [AttributeNames_1.AttributeNames.EXPRESS_TYPE]: ExpressLayerType_1.ExpressLayerType.REQUEST_HANDLER,\n            },\n            name: `request handler${layer.path ? ` - ${route || layerPath}` : ''}`,\n        };\n    }\n    else {\n        return {\n            attributes: {\n                [AttributeNames_1.AttributeNames.EXPRESS_NAME]: layer.name,\n                [AttributeNames_1.AttributeNames.EXPRESS_TYPE]: ExpressLayerType_1.ExpressLayerType.MIDDLEWARE,\n            },\n            name: `middleware - ${layer.name}`,\n        };\n    }\n};\nexports.getLayerMetadata = getLayerMetadata;\n/**\n * Check whether the given obj match pattern\n * @param constant e.g URL of request\n * @param obj obj to inspect\n * @param pattern Match pattern\n */\nconst satisfiesPattern = (constant, pattern) => {\n    if (typeof pattern === 'string') {\n        return pattern === constant;\n    }\n    else if (pattern instanceof RegExp) {\n        return pattern.test(constant);\n    }\n    else if (typeof pattern === 'function') {\n        return pattern(constant);\n    }\n    else {\n        throw new TypeError('Pattern is in unsupported datatype');\n    }\n};\n/**\n * Check whether the given request is ignored by configuration\n * It will not re-throw exceptions from `list` provided by the client\n * @param constant e.g URL of request\n * @param [list] List of ignore patterns\n * @param [onException] callback for doing something when an exception has\n *     occurred\n */\nconst isLayerIgnored = (name, type, config) => {\n    if (Array.isArray(config?.ignoreLayersType) &&\n        config?.ignoreLayersType?.includes(type)) {\n        return true;\n    }\n    if (Array.isArray(config?.ignoreLayers) === false)\n        return false;\n    try {\n        for (const pattern of config.ignoreLayers) {\n            if (satisfiesPattern(name, pattern)) {\n                return true;\n            }\n        }\n    }\n    catch (e) {\n        /* catch block*/\n    }\n    return false;\n};\nexports.isLayerIgnored = isLayerIgnored;\n/**\n * Converts a user-provided error value into an error and error message pair\n *\n * @param error - User-provided error value\n * @returns Both an Error or string representation of the value and an error message\n */\nconst asErrorAndMessage = (error) => error instanceof Error\n    ? [error, error.message]\n    : [String(error), String(error)];\nexports.asErrorAndMessage = asErrorAndMessage;\n/**\n * Extracts the layer path from the route arguments\n *\n * @param args - Arguments of the route\n * @returns The layer path\n */\nconst getLayerPath = (args) => {\n    const firstArg = args[0];\n    if (Array.isArray(firstArg)) {\n        return firstArg.map(arg => extractLayerPathSegment(arg) || '').join(',');\n    }\n    return extractLayerPathSegment(firstArg);\n};\nexports.getLayerPath = getLayerPath;\nconst extractLayerPathSegment = (arg) => {\n    if (typeof arg === 'string') {\n        return arg;\n    }\n    if (arg instanceof RegExp || typeof arg === 'number') {\n        return arg.toString();\n    }\n    return;\n};\nfunction getConstructedRoute(req) {\n    const layersStore = Array.isArray(req[internal_types_1._LAYERS_STORE_PROPERTY])\n        ? req[internal_types_1._LAYERS_STORE_PROPERTY]\n        : [];\n    const meaningfulPaths = layersStore.filter(path => path !== '/' && path !== '/*');\n    if (meaningfulPaths.length === 1 && meaningfulPaths[0] === '*') {\n        return '*';\n    }\n    // Join parts and remove duplicate slashes\n    return meaningfulPaths.join('').replace(/\\/{2,}/g, '/');\n}\nexports.getConstructedRoute = getConstructedRoute;\n/**\n * Extracts the actual matched route from Express request for OpenTelemetry instrumentation.\n * Returns the route that should be used as the http.route attribute.\n *\n * @param req - The Express request object with layers store\n * @param layersStoreProperty - The property name where layer paths are stored\n * @returns The matched route string or undefined if no valid route is found\n */\nfunction getActualMatchedRoute(req) {\n    const layersStore = Array.isArray(req[internal_types_1._LAYERS_STORE_PROPERTY])\n        ? req[internal_types_1._LAYERS_STORE_PROPERTY]\n        : [];\n    // If no layers are stored, no route can be determined\n    if (layersStore.length === 0) {\n        return undefined;\n    }\n    // Handle root path case - if all paths are root, only return root if originalUrl is also root\n    // The layer store also includes root paths in case a non-existing url was requested\n    if (layersStore.every(path => path === '/')) {\n        return req.originalUrl === '/' ? '/' : undefined;\n    }\n    const constructedRoute = getConstructedRoute(req);\n    if (constructedRoute === '*') {\n        return constructedRoute;\n    }\n    // For RegExp routes or route arrays, return the constructed route\n    // This handles the case where the route is defined using RegExp or an array\n    if (constructedRoute.includes('/') &&\n        (constructedRoute.includes(',') ||\n            constructedRoute.includes('\\\\') ||\n            constructedRoute.includes('*') ||\n            constructedRoute.includes('['))) {\n        return constructedRoute;\n    }\n    // Ensure route starts with '/' if it doesn't already\n    const normalizedRoute = constructedRoute.startsWith('/')\n        ? constructedRoute\n        : `/${constructedRoute}`;\n    // Validate that this appears to be a matched route\n    // A route is considered matched if:\n    // 1. We have a constructed route\n    // 2. The original URL matches or starts with our route pattern\n    const isValidRoute = normalizedRoute.length > 0 &&\n        (req.originalUrl === normalizedRoute ||\n            req.originalUrl.startsWith(normalizedRoute) ||\n            isRoutePattern(normalizedRoute));\n    return isValidRoute ? normalizedRoute : undefined;\n}\nexports.getActualMatchedRoute = getActualMatchedRoute;\n/**\n * Checks if a route contains parameter patterns (e.g., :id, :userId)\n * which are valid even if they don't exactly match the original URL\n */\nfunction isRoutePattern(route) {\n    return route.includes(':') || route.includes('*');\n}\n//# sourceMappingURL=utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVudGVsZW1ldHJ5K2luc3RydW1lbnRhdGlvbi1leHByZXNzQDAuNTcuMF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjAvbm9kZV9tb2R1bGVzL0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzL2J1aWxkL3NyYy91dGlscy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCw2QkFBNkIsR0FBRywyQkFBMkIsR0FBRyxvQkFBb0IsR0FBRyx5QkFBeUIsR0FBRyxzQkFBc0IsR0FBRyx3QkFBd0IsR0FBRyxxQkFBcUIsR0FBRyxzQkFBc0I7QUFDbk4sMkJBQTJCLG1CQUFPLENBQUMsK05BQTBCO0FBQzdELHlCQUF5QixtQkFBTyxDQUFDLDJOQUF3QjtBQUN6RCx5QkFBeUIsbUJBQU8sQ0FBQywrTUFBa0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7QUFDYjtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsS0FBSyxFQUFFLHNCQUFzQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsOEJBQThCLG9CQUFvQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixvQ0FBb0MsbUJBQW1CLG1CQUFtQixPQUFPO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLGtDQUFrQyxXQUFXO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsR0FBRztBQUNuRDtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsaUJBQWlCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Ac29saWQtY29ubmVjdC93ZWIvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVudGVsZW1ldHJ5K2luc3RydW1lbnRhdGlvbi1leHByZXNzQDAuNTcuMF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjAvbm9kZV9tb2R1bGVzL0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzL2J1aWxkL3NyYy91dGlscy5qcz85NDJjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLypcbiAqIENvcHlyaWdodCBUaGUgT3BlblRlbGVtZXRyeSBBdXRob3JzXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZ2V0QWN0dWFsTWF0Y2hlZFJvdXRlID0gZXhwb3J0cy5nZXRDb25zdHJ1Y3RlZFJvdXRlID0gZXhwb3J0cy5nZXRMYXllclBhdGggPSBleHBvcnRzLmFzRXJyb3JBbmRNZXNzYWdlID0gZXhwb3J0cy5pc0xheWVySWdub3JlZCA9IGV4cG9ydHMuZ2V0TGF5ZXJNZXRhZGF0YSA9IGV4cG9ydHMuZ2V0Um91dGVyUGF0aCA9IGV4cG9ydHMuc3RvcmVMYXllclBhdGggPSB2b2lkIDA7XG5jb25zdCBFeHByZXNzTGF5ZXJUeXBlXzEgPSByZXF1aXJlKFwiLi9lbnVtcy9FeHByZXNzTGF5ZXJUeXBlXCIpO1xuY29uc3QgQXR0cmlidXRlTmFtZXNfMSA9IHJlcXVpcmUoXCIuL2VudW1zL0F0dHJpYnV0ZU5hbWVzXCIpO1xuY29uc3QgaW50ZXJuYWxfdHlwZXNfMSA9IHJlcXVpcmUoXCIuL2ludGVybmFsLXR5cGVzXCIpO1xuLyoqXG4gKiBTdG9yZSBsYXllcnMgcGF0aCBpbiB0aGUgcmVxdWVzdCB0byBiZSBhYmxlIHRvIGNvbnN0cnVjdCByb3V0ZSBsYXRlclxuICogQHBhcmFtIHJlcXVlc3QgVGhlIHJlcXVlc3Qgd2hlcmVcbiAqIEBwYXJhbSBbdmFsdWVdIHRoZSB2YWx1ZSB0byBwdXNoIGludG8gdGhlIGFycmF5XG4gKi9cbmNvbnN0IHN0b3JlTGF5ZXJQYXRoID0gKHJlcXVlc3QsIHZhbHVlKSA9PiB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkocmVxdWVzdFtpbnRlcm5hbF90eXBlc18xLl9MQVlFUlNfU1RPUkVfUFJPUEVSVFldKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlcXVlc3QsIGludGVybmFsX3R5cGVzXzEuX0xBWUVSU19TVE9SRV9QUk9QRVJUWSwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICB2YWx1ZTogW10sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHsgaXNMYXllclBhdGhTdG9yZWQ6IGZhbHNlIH07XG4gICAgcmVxdWVzdFtpbnRlcm5hbF90eXBlc18xLl9MQVlFUlNfU1RPUkVfUFJPUEVSVFldLnB1c2godmFsdWUpO1xuICAgIHJldHVybiB7IGlzTGF5ZXJQYXRoU3RvcmVkOiB0cnVlIH07XG59O1xuZXhwb3J0cy5zdG9yZUxheWVyUGF0aCA9IHN0b3JlTGF5ZXJQYXRoO1xuLyoqXG4gKiBSZWN1cnNpdmVseSBzZWFyY2ggdGhlIHJvdXRlciBwYXRoIGZyb20gbGF5ZXIgc3RhY2tcbiAqIEBwYXJhbSBwYXRoIFRoZSBwYXRoIHRvIHJlY29uc3RydWN0XG4gKiBAcGFyYW0gbGF5ZXIgVGhlIGxheWVyIHRvIHJlY29uc3RydWN0IGZyb21cbiAqIEByZXR1cm5zIFRoZSByZWNvbnN0cnVjdGVkIHBhdGhcbiAqL1xuY29uc3QgZ2V0Um91dGVyUGF0aCA9IChwYXRoLCBsYXllcikgPT4ge1xuICAgIGNvbnN0IHN0YWNrTGF5ZXIgPSBsYXllci5oYW5kbGU/LnN0YWNrPy5bMF07XG4gICAgaWYgKHN0YWNrTGF5ZXI/LnJvdXRlPy5wYXRoKSB7XG4gICAgICAgIHJldHVybiBgJHtwYXRofSR7c3RhY2tMYXllci5yb3V0ZS5wYXRofWA7XG4gICAgfVxuICAgIGlmIChzdGFja0xheWVyPy5oYW5kbGU/LnN0YWNrKSB7XG4gICAgICAgIHJldHVybiAoMCwgZXhwb3J0cy5nZXRSb3V0ZXJQYXRoKShwYXRoLCBzdGFja0xheWVyKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdGg7XG59O1xuZXhwb3J0cy5nZXRSb3V0ZXJQYXRoID0gZ2V0Um91dGVyUGF0aDtcbi8qKlxuICogUGFyc2UgZXhwcmVzcyBsYXllciBjb250ZXh0IHRvIHJldHJpZXZlIGEgbmFtZSBhbmQgYXR0cmlidXRlcy5cbiAqIEBwYXJhbSByb3V0ZSBUaGUgcm91dGUgb2YgdGhlIGxheWVyXG4gKiBAcGFyYW0gbGF5ZXIgRXhwcmVzcyBsYXllclxuICogQHBhcmFtIFtsYXllclBhdGhdIGlmIHByZXNlbnQsIHRoZSBwYXRoIG9uIHdoaWNoIHRoZSBsYXllciBoYXMgYmVlbiBtb3VudGVkXG4gKi9cbmNvbnN0IGdldExheWVyTWV0YWRhdGEgPSAocm91dGUsIGxheWVyLCBsYXllclBhdGgpID0+IHtcbiAgICBpZiAobGF5ZXIubmFtZSA9PT0gJ3JvdXRlcicpIHtcbiAgICAgICAgY29uc3QgbWF5YmVSb3V0ZXJQYXRoID0gKDAsIGV4cG9ydHMuZ2V0Um91dGVyUGF0aCkoJycsIGxheWVyKTtcbiAgICAgICAgY29uc3QgZXh0cmFjdGVkUm91dGVyUGF0aCA9IG1heWJlUm91dGVyUGF0aFxuICAgICAgICAgICAgPyBtYXliZVJvdXRlclBhdGhcbiAgICAgICAgICAgIDogbGF5ZXJQYXRoIHx8IHJvdXRlIHx8ICcvJztcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICBbQXR0cmlidXRlTmFtZXNfMS5BdHRyaWJ1dGVOYW1lcy5FWFBSRVNTX05BTUVdOiBleHRyYWN0ZWRSb3V0ZXJQYXRoLFxuICAgICAgICAgICAgICAgIFtBdHRyaWJ1dGVOYW1lc18xLkF0dHJpYnV0ZU5hbWVzLkVYUFJFU1NfVFlQRV06IEV4cHJlc3NMYXllclR5cGVfMS5FeHByZXNzTGF5ZXJUeXBlLlJPVVRFUixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBuYW1lOiBgcm91dGVyIC0gJHtleHRyYWN0ZWRSb3V0ZXJQYXRofWAsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGxheWVyLm5hbWUgPT09ICdib3VuZCBkaXNwYXRjaCcgfHwgbGF5ZXIubmFtZSA9PT0gJ2hhbmRsZScpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICBbQXR0cmlidXRlTmFtZXNfMS5BdHRyaWJ1dGVOYW1lcy5FWFBSRVNTX05BTUVdOiAocm91dGUgfHwgbGF5ZXJQYXRoKSA/PyAncmVxdWVzdCBoYW5kbGVyJyxcbiAgICAgICAgICAgICAgICBbQXR0cmlidXRlTmFtZXNfMS5BdHRyaWJ1dGVOYW1lcy5FWFBSRVNTX1RZUEVdOiBFeHByZXNzTGF5ZXJUeXBlXzEuRXhwcmVzc0xheWVyVHlwZS5SRVFVRVNUX0hBTkRMRVIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbmFtZTogYHJlcXVlc3QgaGFuZGxlciR7bGF5ZXIucGF0aCA/IGAgLSAke3JvdXRlIHx8IGxheWVyUGF0aH1gIDogJyd9YCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgW0F0dHJpYnV0ZU5hbWVzXzEuQXR0cmlidXRlTmFtZXMuRVhQUkVTU19OQU1FXTogbGF5ZXIubmFtZSxcbiAgICAgICAgICAgICAgICBbQXR0cmlidXRlTmFtZXNfMS5BdHRyaWJ1dGVOYW1lcy5FWFBSRVNTX1RZUEVdOiBFeHByZXNzTGF5ZXJUeXBlXzEuRXhwcmVzc0xheWVyVHlwZS5NSURETEVXQVJFLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG5hbWU6IGBtaWRkbGV3YXJlIC0gJHtsYXllci5uYW1lfWAsXG4gICAgICAgIH07XG4gICAgfVxufTtcbmV4cG9ydHMuZ2V0TGF5ZXJNZXRhZGF0YSA9IGdldExheWVyTWV0YWRhdGE7XG4vKipcbiAqIENoZWNrIHdoZXRoZXIgdGhlIGdpdmVuIG9iaiBtYXRjaCBwYXR0ZXJuXG4gKiBAcGFyYW0gY29uc3RhbnQgZS5nIFVSTCBvZiByZXF1ZXN0XG4gKiBAcGFyYW0gb2JqIG9iaiB0byBpbnNwZWN0XG4gKiBAcGFyYW0gcGF0dGVybiBNYXRjaCBwYXR0ZXJuXG4gKi9cbmNvbnN0IHNhdGlzZmllc1BhdHRlcm4gPSAoY29uc3RhbnQsIHBhdHRlcm4pID0+IHtcbiAgICBpZiAodHlwZW9mIHBhdHRlcm4gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBwYXR0ZXJuID09PSBjb25zdGFudDtcbiAgICB9XG4gICAgZWxzZSBpZiAocGF0dGVybiBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuICAgICAgICByZXR1cm4gcGF0dGVybi50ZXN0KGNvbnN0YW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHBhdHRlcm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHBhdHRlcm4oY29uc3RhbnQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUGF0dGVybiBpcyBpbiB1bnN1cHBvcnRlZCBkYXRhdHlwZScpO1xuICAgIH1cbn07XG4vKipcbiAqIENoZWNrIHdoZXRoZXIgdGhlIGdpdmVuIHJlcXVlc3QgaXMgaWdub3JlZCBieSBjb25maWd1cmF0aW9uXG4gKiBJdCB3aWxsIG5vdCByZS10aHJvdyBleGNlcHRpb25zIGZyb20gYGxpc3RgIHByb3ZpZGVkIGJ5IHRoZSBjbGllbnRcbiAqIEBwYXJhbSBjb25zdGFudCBlLmcgVVJMIG9mIHJlcXVlc3RcbiAqIEBwYXJhbSBbbGlzdF0gTGlzdCBvZiBpZ25vcmUgcGF0dGVybnNcbiAqIEBwYXJhbSBbb25FeGNlcHRpb25dIGNhbGxiYWNrIGZvciBkb2luZyBzb21ldGhpbmcgd2hlbiBhbiBleGNlcHRpb24gaGFzXG4gKiAgICAgb2NjdXJyZWRcbiAqL1xuY29uc3QgaXNMYXllcklnbm9yZWQgPSAobmFtZSwgdHlwZSwgY29uZmlnKSA9PiB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY29uZmlnPy5pZ25vcmVMYXllcnNUeXBlKSAmJlxuICAgICAgICBjb25maWc/Lmlnbm9yZUxheWVyc1R5cGU/LmluY2x1ZGVzKHR5cGUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShjb25maWc/Lmlnbm9yZUxheWVycykgPT09IGZhbHNlKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIGNvbmZpZy5pZ25vcmVMYXllcnMpIHtcbiAgICAgICAgICAgIGlmIChzYXRpc2ZpZXNQYXR0ZXJuKG5hbWUsIHBhdHRlcm4pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgLyogY2F0Y2ggYmxvY2sqL1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuZXhwb3J0cy5pc0xheWVySWdub3JlZCA9IGlzTGF5ZXJJZ25vcmVkO1xuLyoqXG4gKiBDb252ZXJ0cyBhIHVzZXItcHJvdmlkZWQgZXJyb3IgdmFsdWUgaW50byBhbiBlcnJvciBhbmQgZXJyb3IgbWVzc2FnZSBwYWlyXG4gKlxuICogQHBhcmFtIGVycm9yIC0gVXNlci1wcm92aWRlZCBlcnJvciB2YWx1ZVxuICogQHJldHVybnMgQm90aCBhbiBFcnJvciBvciBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHZhbHVlIGFuZCBhbiBlcnJvciBtZXNzYWdlXG4gKi9cbmNvbnN0IGFzRXJyb3JBbmRNZXNzYWdlID0gKGVycm9yKSA9PiBlcnJvciBpbnN0YW5jZW9mIEVycm9yXG4gICAgPyBbZXJyb3IsIGVycm9yLm1lc3NhZ2VdXG4gICAgOiBbU3RyaW5nKGVycm9yKSwgU3RyaW5nKGVycm9yKV07XG5leHBvcnRzLmFzRXJyb3JBbmRNZXNzYWdlID0gYXNFcnJvckFuZE1lc3NhZ2U7XG4vKipcbiAqIEV4dHJhY3RzIHRoZSBsYXllciBwYXRoIGZyb20gdGhlIHJvdXRlIGFyZ3VtZW50c1xuICpcbiAqIEBwYXJhbSBhcmdzIC0gQXJndW1lbnRzIG9mIHRoZSByb3V0ZVxuICogQHJldHVybnMgVGhlIGxheWVyIHBhdGhcbiAqL1xuY29uc3QgZ2V0TGF5ZXJQYXRoID0gKGFyZ3MpID0+IHtcbiAgICBjb25zdCBmaXJzdEFyZyA9IGFyZ3NbMF07XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZmlyc3RBcmcpKSB7XG4gICAgICAgIHJldHVybiBmaXJzdEFyZy5tYXAoYXJnID0+IGV4dHJhY3RMYXllclBhdGhTZWdtZW50KGFyZykgfHwgJycpLmpvaW4oJywnKTtcbiAgICB9XG4gICAgcmV0dXJuIGV4dHJhY3RMYXllclBhdGhTZWdtZW50KGZpcnN0QXJnKTtcbn07XG5leHBvcnRzLmdldExheWVyUGF0aCA9IGdldExheWVyUGF0aDtcbmNvbnN0IGV4dHJhY3RMYXllclBhdGhTZWdtZW50ID0gKGFyZykgPT4ge1xuICAgIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gYXJnO1xuICAgIH1cbiAgICBpZiAoYXJnIGluc3RhbmNlb2YgUmVnRXhwIHx8IHR5cGVvZiBhcmcgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHJldHVybiBhcmcudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgcmV0dXJuO1xufTtcbmZ1bmN0aW9uIGdldENvbnN0cnVjdGVkUm91dGUocmVxKSB7XG4gICAgY29uc3QgbGF5ZXJzU3RvcmUgPSBBcnJheS5pc0FycmF5KHJlcVtpbnRlcm5hbF90eXBlc18xLl9MQVlFUlNfU1RPUkVfUFJPUEVSVFldKVxuICAgICAgICA/IHJlcVtpbnRlcm5hbF90eXBlc18xLl9MQVlFUlNfU1RPUkVfUFJPUEVSVFldXG4gICAgICAgIDogW107XG4gICAgY29uc3QgbWVhbmluZ2Z1bFBhdGhzID0gbGF5ZXJzU3RvcmUuZmlsdGVyKHBhdGggPT4gcGF0aCAhPT0gJy8nICYmIHBhdGggIT09ICcvKicpO1xuICAgIGlmIChtZWFuaW5nZnVsUGF0aHMubGVuZ3RoID09PSAxICYmIG1lYW5pbmdmdWxQYXRoc1swXSA9PT0gJyonKSB7XG4gICAgICAgIHJldHVybiAnKic7XG4gICAgfVxuICAgIC8vIEpvaW4gcGFydHMgYW5kIHJlbW92ZSBkdXBsaWNhdGUgc2xhc2hlc1xuICAgIHJldHVybiBtZWFuaW5nZnVsUGF0aHMuam9pbignJykucmVwbGFjZSgvXFwvezIsfS9nLCAnLycpO1xufVxuZXhwb3J0cy5nZXRDb25zdHJ1Y3RlZFJvdXRlID0gZ2V0Q29uc3RydWN0ZWRSb3V0ZTtcbi8qKlxuICogRXh0cmFjdHMgdGhlIGFjdHVhbCBtYXRjaGVkIHJvdXRlIGZyb20gRXhwcmVzcyByZXF1ZXN0IGZvciBPcGVuVGVsZW1ldHJ5IGluc3RydW1lbnRhdGlvbi5cbiAqIFJldHVybnMgdGhlIHJvdXRlIHRoYXQgc2hvdWxkIGJlIHVzZWQgYXMgdGhlIGh0dHAucm91dGUgYXR0cmlidXRlLlxuICpcbiAqIEBwYXJhbSByZXEgLSBUaGUgRXhwcmVzcyByZXF1ZXN0IG9iamVjdCB3aXRoIGxheWVycyBzdG9yZVxuICogQHBhcmFtIGxheWVyc1N0b3JlUHJvcGVydHkgLSBUaGUgcHJvcGVydHkgbmFtZSB3aGVyZSBsYXllciBwYXRocyBhcmUgc3RvcmVkXG4gKiBAcmV0dXJucyBUaGUgbWF0Y2hlZCByb3V0ZSBzdHJpbmcgb3IgdW5kZWZpbmVkIGlmIG5vIHZhbGlkIHJvdXRlIGlzIGZvdW5kXG4gKi9cbmZ1bmN0aW9uIGdldEFjdHVhbE1hdGNoZWRSb3V0ZShyZXEpIHtcbiAgICBjb25zdCBsYXllcnNTdG9yZSA9IEFycmF5LmlzQXJyYXkocmVxW2ludGVybmFsX3R5cGVzXzEuX0xBWUVSU19TVE9SRV9QUk9QRVJUWV0pXG4gICAgICAgID8gcmVxW2ludGVybmFsX3R5cGVzXzEuX0xBWUVSU19TVE9SRV9QUk9QRVJUWV1cbiAgICAgICAgOiBbXTtcbiAgICAvLyBJZiBubyBsYXllcnMgYXJlIHN0b3JlZCwgbm8gcm91dGUgY2FuIGJlIGRldGVybWluZWRcbiAgICBpZiAobGF5ZXJzU3RvcmUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8vIEhhbmRsZSByb290IHBhdGggY2FzZSAtIGlmIGFsbCBwYXRocyBhcmUgcm9vdCwgb25seSByZXR1cm4gcm9vdCBpZiBvcmlnaW5hbFVybCBpcyBhbHNvIHJvb3RcbiAgICAvLyBUaGUgbGF5ZXIgc3RvcmUgYWxzbyBpbmNsdWRlcyByb290IHBhdGhzIGluIGNhc2UgYSBub24tZXhpc3RpbmcgdXJsIHdhcyByZXF1ZXN0ZWRcbiAgICBpZiAobGF5ZXJzU3RvcmUuZXZlcnkocGF0aCA9PiBwYXRoID09PSAnLycpKSB7XG4gICAgICAgIHJldHVybiByZXEub3JpZ2luYWxVcmwgPT09ICcvJyA/ICcvJyA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgY29uc3RydWN0ZWRSb3V0ZSA9IGdldENvbnN0cnVjdGVkUm91dGUocmVxKTtcbiAgICBpZiAoY29uc3RydWN0ZWRSb3V0ZSA9PT0gJyonKSB7XG4gICAgICAgIHJldHVybiBjb25zdHJ1Y3RlZFJvdXRlO1xuICAgIH1cbiAgICAvLyBGb3IgUmVnRXhwIHJvdXRlcyBvciByb3V0ZSBhcnJheXMsIHJldHVybiB0aGUgY29uc3RydWN0ZWQgcm91dGVcbiAgICAvLyBUaGlzIGhhbmRsZXMgdGhlIGNhc2Ugd2hlcmUgdGhlIHJvdXRlIGlzIGRlZmluZWQgdXNpbmcgUmVnRXhwIG9yIGFuIGFycmF5XG4gICAgaWYgKGNvbnN0cnVjdGVkUm91dGUuaW5jbHVkZXMoJy8nKSAmJlxuICAgICAgICAoY29uc3RydWN0ZWRSb3V0ZS5pbmNsdWRlcygnLCcpIHx8XG4gICAgICAgICAgICBjb25zdHJ1Y3RlZFJvdXRlLmluY2x1ZGVzKCdcXFxcJykgfHxcbiAgICAgICAgICAgIGNvbnN0cnVjdGVkUm91dGUuaW5jbHVkZXMoJyonKSB8fFxuICAgICAgICAgICAgY29uc3RydWN0ZWRSb3V0ZS5pbmNsdWRlcygnWycpKSkge1xuICAgICAgICByZXR1cm4gY29uc3RydWN0ZWRSb3V0ZTtcbiAgICB9XG4gICAgLy8gRW5zdXJlIHJvdXRlIHN0YXJ0cyB3aXRoICcvJyBpZiBpdCBkb2Vzbid0IGFscmVhZHlcbiAgICBjb25zdCBub3JtYWxpemVkUm91dGUgPSBjb25zdHJ1Y3RlZFJvdXRlLnN0YXJ0c1dpdGgoJy8nKVxuICAgICAgICA/IGNvbnN0cnVjdGVkUm91dGVcbiAgICAgICAgOiBgLyR7Y29uc3RydWN0ZWRSb3V0ZX1gO1xuICAgIC8vIFZhbGlkYXRlIHRoYXQgdGhpcyBhcHBlYXJzIHRvIGJlIGEgbWF0Y2hlZCByb3V0ZVxuICAgIC8vIEEgcm91dGUgaXMgY29uc2lkZXJlZCBtYXRjaGVkIGlmOlxuICAgIC8vIDEuIFdlIGhhdmUgYSBjb25zdHJ1Y3RlZCByb3V0ZVxuICAgIC8vIDIuIFRoZSBvcmlnaW5hbCBVUkwgbWF0Y2hlcyBvciBzdGFydHMgd2l0aCBvdXIgcm91dGUgcGF0dGVyblxuICAgIGNvbnN0IGlzVmFsaWRSb3V0ZSA9IG5vcm1hbGl6ZWRSb3V0ZS5sZW5ndGggPiAwICYmXG4gICAgICAgIChyZXEub3JpZ2luYWxVcmwgPT09IG5vcm1hbGl6ZWRSb3V0ZSB8fFxuICAgICAgICAgICAgcmVxLm9yaWdpbmFsVXJsLnN0YXJ0c1dpdGgobm9ybWFsaXplZFJvdXRlKSB8fFxuICAgICAgICAgICAgaXNSb3V0ZVBhdHRlcm4obm9ybWFsaXplZFJvdXRlKSk7XG4gICAgcmV0dXJuIGlzVmFsaWRSb3V0ZSA/IG5vcm1hbGl6ZWRSb3V0ZSA6IHVuZGVmaW5lZDtcbn1cbmV4cG9ydHMuZ2V0QWN0dWFsTWF0Y2hlZFJvdXRlID0gZ2V0QWN0dWFsTWF0Y2hlZFJvdXRlO1xuLyoqXG4gKiBDaGVja3MgaWYgYSByb3V0ZSBjb250YWlucyBwYXJhbWV0ZXIgcGF0dGVybnMgKGUuZy4sIDppZCwgOnVzZXJJZClcbiAqIHdoaWNoIGFyZSB2YWxpZCBldmVuIGlmIHRoZXkgZG9uJ3QgZXhhY3RseSBtYXRjaCB0aGUgb3JpZ2luYWwgVVJMXG4gKi9cbmZ1bmN0aW9uIGlzUm91dGVQYXR0ZXJuKHJvdXRlKSB7XG4gICAgcmV0dXJuIHJvdXRlLmluY2x1ZGVzKCc6JykgfHwgcm91dGUuaW5jbHVkZXMoJyonKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWxzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/utils.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/version.js":
/*!********************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/version.js ***!
  \********************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.PACKAGE_NAME = exports.PACKAGE_VERSION = void 0;\n// this is autogenerated file, see scripts/version-update.js\nexports.PACKAGE_VERSION = '0.57.0';\nexports.PACKAGE_NAME = '@opentelemetry/instrumentation-express';\n//# sourceMappingURL=version.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVudGVsZW1ldHJ5K2luc3RydW1lbnRhdGlvbi1leHByZXNzQDAuNTcuMF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjAvbm9kZV9tb2R1bGVzL0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzL2J1aWxkL3NyYy92ZXJzaW9uLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELG9CQUFvQixHQUFHLHVCQUF1QjtBQUM5QztBQUNBLHVCQUF1QjtBQUN2QixvQkFBb0I7QUFDcEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Ac29saWQtY29ubmVjdC93ZWIvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVudGVsZW1ldHJ5K2luc3RydW1lbnRhdGlvbi1leHByZXNzQDAuNTcuMF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjAvbm9kZV9tb2R1bGVzL0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzL2J1aWxkL3NyYy92ZXJzaW9uLmpzPzQwMGMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vKlxuICogQ29weXJpZ2h0IFRoZSBPcGVuVGVsZW1ldHJ5IEF1dGhvcnNcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwczovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5QQUNLQUdFX05BTUUgPSBleHBvcnRzLlBBQ0tBR0VfVkVSU0lPTiA9IHZvaWQgMDtcbi8vIHRoaXMgaXMgYXV0b2dlbmVyYXRlZCBmaWxlLCBzZWUgc2NyaXB0cy92ZXJzaW9uLXVwZGF0ZS5qc1xuZXhwb3J0cy5QQUNLQUdFX1ZFUlNJT04gPSAnMC41Ny4wJztcbmV4cG9ydHMuUEFDS0FHRV9OQU1FID0gJ0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZlcnNpb24uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/version.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/instrumentation.js":
/*!****************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/instrumentation.js ***!
  \****************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval(";globalThis[\"_sentryRewritesTunnelPath\"] = undefined;globalThis[\"SENTRY_RELEASE\"] = undefined;globalThis[\"_sentryBasePath\"] = undefined;globalThis[\"_sentryNextJsVersion\"] = \"14.2.35\";globalThis[\"_sentryRewriteFramesDistDir\"] = \".next\";\n/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ExpressInstrumentation = void 0;\nconst core_1 = __webpack_require__(/*! @opentelemetry/core */ \"(rsc)/../../node_modules/.pnpm/@opentelemetry+core@2.4.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/core/build/esm/index.js\");\nconst api_1 = __webpack_require__(/*! @opentelemetry/api */ \"(rsc)/../../node_modules/.pnpm/@opentelemetry+api@1.9.0/node_modules/@opentelemetry/api/build/esm/index.js\");\nconst ExpressLayerType_1 = __webpack_require__(/*! ./enums/ExpressLayerType */ \"(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/enums/ExpressLayerType.js\");\nconst AttributeNames_1 = __webpack_require__(/*! ./enums/AttributeNames */ \"(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/enums/AttributeNames.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/utils.js\");\n/** @knipignore */\nconst version_1 = __webpack_require__(/*! ./version */ \"(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/version.js\");\nconst instrumentation_1 = __webpack_require__(/*! @opentelemetry/instrumentation */ \"(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation@0.208.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation/build/esm/index.js\");\nconst semantic_conventions_1 = __webpack_require__(/*! @opentelemetry/semantic-conventions */ \"(rsc)/../../node_modules/.pnpm/@opentelemetry+semantic-conventions@1.39.0/node_modules/@opentelemetry/semantic-conventions/build/esm/index.js\");\nconst internal_types_1 = __webpack_require__(/*! ./internal-types */ \"(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/internal-types.js\");\n/** Express instrumentation for OpenTelemetry */\nclass ExpressInstrumentation extends instrumentation_1.InstrumentationBase {\n    constructor(config = {}) {\n        super(version_1.PACKAGE_NAME, version_1.PACKAGE_VERSION, config);\n    }\n    init() {\n        return [\n            new instrumentation_1.InstrumentationNodeModuleDefinition('express', ['>=4.0.0 <6'], moduleExports => {\n                const isExpressWithRouterPrototype = typeof moduleExports?.Router?.prototype?.route === 'function';\n                const routerProto = isExpressWithRouterPrototype\n                    ? moduleExports.Router.prototype // Express v5\n                    : moduleExports.Router; // Express v4\n                // patch express.Router.route\n                if ((0, instrumentation_1.isWrapped)(routerProto.route)) {\n                    this._unwrap(routerProto, 'route');\n                }\n                this._wrap(routerProto, 'route', this._getRoutePatch());\n                // patch express.Router.use\n                if ((0, instrumentation_1.isWrapped)(routerProto.use)) {\n                    this._unwrap(routerProto, 'use');\n                }\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                this._wrap(routerProto, 'use', this._getRouterUsePatch());\n                // patch express.Application.use\n                if ((0, instrumentation_1.isWrapped)(moduleExports.application.use)) {\n                    this._unwrap(moduleExports.application, 'use');\n                }\n                this._wrap(moduleExports.application, 'use', \n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                this._getAppUsePatch(isExpressWithRouterPrototype));\n                return moduleExports;\n            }, moduleExports => {\n                if (moduleExports === undefined)\n                    return;\n                const isExpressWithRouterPrototype = typeof moduleExports?.Router?.prototype?.route === 'function';\n                const routerProto = isExpressWithRouterPrototype\n                    ? moduleExports.Router.prototype\n                    : moduleExports.Router;\n                this._unwrap(routerProto, 'route');\n                this._unwrap(routerProto, 'use');\n                this._unwrap(moduleExports.application, 'use');\n            }),\n        ];\n    }\n    /**\n     * Get the patch for Router.route function\n     */\n    _getRoutePatch() {\n        const instrumentation = this;\n        return function (original) {\n            return function route_trace(...args) {\n                const route = original.apply(this, args);\n                const layer = this.stack[this.stack.length - 1];\n                instrumentation._applyPatch(layer, (0, utils_1.getLayerPath)(args));\n                return route;\n            };\n        };\n    }\n    /**\n     * Get the patch for Router.use function\n     */\n    _getRouterUsePatch() {\n        const instrumentation = this;\n        return function (original) {\n            return function use(...args) {\n                const route = original.apply(this, args);\n                const layer = this.stack[this.stack.length - 1];\n                instrumentation._applyPatch(layer, (0, utils_1.getLayerPath)(args));\n                return route;\n            };\n        };\n    }\n    /**\n     * Get the patch for Application.use function\n     */\n    _getAppUsePatch(isExpressWithRouterPrototype) {\n        const instrumentation = this;\n        return function (original) {\n            return function use(...args) {\n                // If we access app.router in express 4.x we trigger an assertion error.\n                // This property existed in v3, was removed in v4 and then re-added in v5.\n                const router = isExpressWithRouterPrototype\n                    ? this.router\n                    : this._router;\n                const route = original.apply(this, args);\n                if (router) {\n                    const layer = router.stack[router.stack.length - 1];\n                    instrumentation._applyPatch(layer, (0, utils_1.getLayerPath)(args));\n                }\n                return route;\n            };\n        };\n    }\n    /** Patch each express layer to create span and propagate context */\n    _applyPatch(layer, layerPath) {\n        const instrumentation = this;\n        // avoid patching multiple times the same layer\n        if (layer[internal_types_1.kLayerPatched] === true)\n            return;\n        layer[internal_types_1.kLayerPatched] = true;\n        this._wrap(layer, 'handle', original => {\n            // TODO: instrument error handlers\n            if (original.length === 4)\n                return original;\n            const patched = function (req, res) {\n                const { isLayerPathStored } = (0, utils_1.storeLayerPath)(req, layerPath);\n                const constructedRoute = (0, utils_1.getConstructedRoute)(req);\n                const actualMatchedRoute = (0, utils_1.getActualMatchedRoute)(req);\n                const attributes = {\n                    [semantic_conventions_1.ATTR_HTTP_ROUTE]: actualMatchedRoute,\n                };\n                const metadata = (0, utils_1.getLayerMetadata)(constructedRoute, layer, layerPath);\n                const type = metadata.attributes[AttributeNames_1.AttributeNames.EXPRESS_TYPE];\n                const rpcMetadata = (0, core_1.getRPCMetadata)(api_1.context.active());\n                if (rpcMetadata?.type === core_1.RPCType.HTTP) {\n                    rpcMetadata.route = actualMatchedRoute;\n                }\n                // verify against the config if the layer should be ignored\n                if ((0, utils_1.isLayerIgnored)(metadata.name, type, instrumentation.getConfig())) {\n                    if (type === ExpressLayerType_1.ExpressLayerType.MIDDLEWARE) {\n                        req[internal_types_1._LAYERS_STORE_PROPERTY].pop();\n                    }\n                    return original.apply(this, arguments);\n                }\n                if (api_1.trace.getSpan(api_1.context.active()) === undefined) {\n                    return original.apply(this, arguments);\n                }\n                const spanName = instrumentation._getSpanName({\n                    request: req,\n                    layerType: type,\n                    route: constructedRoute,\n                }, metadata.name);\n                const span = instrumentation.tracer.startSpan(spanName, {\n                    attributes: Object.assign(attributes, metadata.attributes),\n                });\n                const parentContext = api_1.context.active();\n                let currentContext = api_1.trace.setSpan(parentContext, span);\n                const { requestHook } = instrumentation.getConfig();\n                if (requestHook) {\n                    (0, instrumentation_1.safeExecuteInTheMiddle)(() => requestHook(span, {\n                        request: req,\n                        layerType: type,\n                        route: constructedRoute,\n                    }), e => {\n                        if (e) {\n                            api_1.diag.error('express instrumentation: request hook failed', e);\n                        }\n                    }, true);\n                }\n                let spanHasEnded = false;\n                // TODO: Fix router spans (getRouterPath does not work properly) to\n                // have useful names before removing this branch\n                if (metadata.attributes[AttributeNames_1.AttributeNames.EXPRESS_TYPE] ===\n                    ExpressLayerType_1.ExpressLayerType.ROUTER) {\n                    span.end();\n                    spanHasEnded = true;\n                    currentContext = parentContext;\n                }\n                // listener for response.on('finish')\n                const onResponseFinish = () => {\n                    if (spanHasEnded === false) {\n                        spanHasEnded = true;\n                        span.end();\n                    }\n                };\n                // verify we have a callback\n                const args = Array.from(arguments);\n                const callbackIdx = args.findIndex(arg => typeof arg === 'function');\n                if (callbackIdx >= 0) {\n                    arguments[callbackIdx] = function () {\n                        // express considers anything but an empty value, \"route\" or \"router\"\n                        // passed to its callback to be an error\n                        const maybeError = arguments[0];\n                        const isError = ![undefined, null, 'route', 'router'].includes(maybeError);\n                        if (!spanHasEnded && isError) {\n                            const [error, message] = (0, utils_1.asErrorAndMessage)(maybeError);\n                            span.recordException(error);\n                            span.setStatus({\n                                code: api_1.SpanStatusCode.ERROR,\n                                message,\n                            });\n                        }\n                        if (spanHasEnded === false) {\n                            spanHasEnded = true;\n                            req.res?.removeListener('finish', onResponseFinish);\n                            span.end();\n                        }\n                        if (!(req.route && isError) && isLayerPathStored) {\n                            req[internal_types_1._LAYERS_STORE_PROPERTY].pop();\n                        }\n                        const callback = args[callbackIdx];\n                        return api_1.context.bind(parentContext, callback).apply(this, arguments);\n                    };\n                }\n                try {\n                    return api_1.context.bind(currentContext, original).apply(this, arguments);\n                }\n                catch (anyError) {\n                    const [error, message] = (0, utils_1.asErrorAndMessage)(anyError);\n                    span.recordException(error);\n                    span.setStatus({\n                        code: api_1.SpanStatusCode.ERROR,\n                        message,\n                    });\n                    throw anyError;\n                }\n                finally {\n                    /**\n                     * At this point if the callback wasn't called, that means either the\n                     * layer is asynchronous (so it will call the callback later on) or that\n                     * the layer directly ends the http response, so we'll hook into the \"finish\"\n                     * event to handle the later case.\n                     */\n                    if (!spanHasEnded) {\n                        res.once('finish', onResponseFinish);\n                    }\n                }\n            };\n            // `handle` isn't just a regular function in some cases. It also contains\n            // some properties holding metadata and state so we need to proxy them\n            // through through patched function\n            // ref: https://github.com/open-telemetry/opentelemetry-js-contrib/issues/1950\n            // Also some apps/libs do their own patching before OTEL and have these properties\n            // in the proptotype. So we use a `for...in` loop to get own properties and also\n            // any enumerable prop in the prototype chain\n            // ref: https://github.com/open-telemetry/opentelemetry-js-contrib/issues/2271\n            for (const key in original) {\n                Object.defineProperty(patched, key, {\n                    get() {\n                        return original[key];\n                    },\n                    set(value) {\n                        original[key] = value;\n                    },\n                });\n            }\n            return patched;\n        });\n    }\n    _getSpanName(info, defaultName) {\n        const { spanNameHook } = this.getConfig();\n        if (!(spanNameHook instanceof Function)) {\n            return defaultName;\n        }\n        try {\n            return spanNameHook(info, defaultName) ?? defaultName;\n        }\n        catch (err) {\n            api_1.diag.error('express instrumentation: error calling span name rewrite hook', err);\n            return defaultName;\n        }\n    }\n}\nexports.ExpressInstrumentation = ExpressInstrumentation;\n//# sourceMappingURL=instrumentation.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVudGVsZW1ldHJ5K2luc3RydW1lbnRhdGlvbi1leHByZXNzQDAuNTcuMF9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjAvbm9kZV9tb2R1bGVzL0BvcGVudGVsZW1ldHJ5L2luc3RydW1lbnRhdGlvbi1leHByZXNzL2J1aWxkL3NyYy9pbnN0cnVtZW50YXRpb24uanMiLCJtYXBwaW5ncyI6IkFBQWEsQ0FBQyxvREFBb0QseUNBQXlDLDBDQUEwQywrQ0FBK0M7QUFDcE07QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELDhCQUE4QjtBQUM5QixlQUFlLG1CQUFPLENBQUMsa0tBQXFCO0FBQzVDLGNBQWMsbUJBQU8sQ0FBQyxzSUFBb0I7QUFDMUMsMkJBQTJCLG1CQUFPLENBQUMsK05BQTBCO0FBQzdELHlCQUF5QixtQkFBTyxDQUFDLDJOQUF3QjtBQUN6RCxnQkFBZ0IsbUJBQU8sQ0FBQyw2TEFBUztBQUNqQztBQUNBLGtCQUFrQixtQkFBTyxDQUFDLGlNQUFXO0FBQ3JDLDBCQUEwQixtQkFBTyxDQUFDLHFNQUFnQztBQUNsRSwrQkFBK0IsbUJBQU8sQ0FBQywwTEFBcUM7QUFDNUUseUJBQXlCLG1CQUFPLENBQUMsK01BQWtCO0FBQ25EO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG9CQUFvQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSx3QkFBd0IsY0FBYztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZ0JBQWdCLGVBQWU7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQHNvbGlkLWNvbm5lY3Qvd2ViLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9Ab3BlbnRlbGVtZXRyeStpbnN0cnVtZW50YXRpb24tZXhwcmVzc0AwLjU3LjBfQG9wZW50ZWxlbWV0cnkrYXBpQDEuOS4wL25vZGVfbW9kdWxlcy9Ab3BlbnRlbGVtZXRyeS9pbnN0cnVtZW50YXRpb24tZXhwcmVzcy9idWlsZC9zcmMvaW5zdHJ1bWVudGF0aW9uLmpzPzA5ZmEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7O2dsb2JhbFRoaXNbXCJfc2VudHJ5UmV3cml0ZXNUdW5uZWxQYXRoXCJdID0gdW5kZWZpbmVkO2dsb2JhbFRoaXNbXCJTRU5UUllfUkVMRUFTRVwiXSA9IHVuZGVmaW5lZDtnbG9iYWxUaGlzW1wiX3NlbnRyeUJhc2VQYXRoXCJdID0gdW5kZWZpbmVkO2dsb2JhbFRoaXNbXCJfc2VudHJ5TmV4dEpzVmVyc2lvblwiXSA9IFwiMTQuMi4zNVwiO2dsb2JhbFRoaXNbXCJfc2VudHJ5UmV3cml0ZUZyYW1lc0Rpc3REaXJcIl0gPSBcIi5uZXh0XCI7XG4vKlxuICogQ29weXJpZ2h0IFRoZSBPcGVuVGVsZW1ldHJ5IEF1dGhvcnNcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwczovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5FeHByZXNzSW5zdHJ1bWVudGF0aW9uID0gdm9pZCAwO1xuY29uc3QgY29yZV8xID0gcmVxdWlyZShcIkBvcGVudGVsZW1ldHJ5L2NvcmVcIik7XG5jb25zdCBhcGlfMSA9IHJlcXVpcmUoXCJAb3BlbnRlbGVtZXRyeS9hcGlcIik7XG5jb25zdCBFeHByZXNzTGF5ZXJUeXBlXzEgPSByZXF1aXJlKFwiLi9lbnVtcy9FeHByZXNzTGF5ZXJUeXBlXCIpO1xuY29uc3QgQXR0cmlidXRlTmFtZXNfMSA9IHJlcXVpcmUoXCIuL2VudW1zL0F0dHJpYnV0ZU5hbWVzXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xuLyoqIEBrbmlwaWdub3JlICovXG5jb25zdCB2ZXJzaW9uXzEgPSByZXF1aXJlKFwiLi92ZXJzaW9uXCIpO1xuY29uc3QgaW5zdHJ1bWVudGF0aW9uXzEgPSByZXF1aXJlKFwiQG9wZW50ZWxlbWV0cnkvaW5zdHJ1bWVudGF0aW9uXCIpO1xuY29uc3Qgc2VtYW50aWNfY29udmVudGlvbnNfMSA9IHJlcXVpcmUoXCJAb3BlbnRlbGVtZXRyeS9zZW1hbnRpYy1jb252ZW50aW9uc1wiKTtcbmNvbnN0IGludGVybmFsX3R5cGVzXzEgPSByZXF1aXJlKFwiLi9pbnRlcm5hbC10eXBlc1wiKTtcbi8qKiBFeHByZXNzIGluc3RydW1lbnRhdGlvbiBmb3IgT3BlblRlbGVtZXRyeSAqL1xuY2xhc3MgRXhwcmVzc0luc3RydW1lbnRhdGlvbiBleHRlbmRzIGluc3RydW1lbnRhdGlvbl8xLkluc3RydW1lbnRhdGlvbkJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHZlcnNpb25fMS5QQUNLQUdFX05BTUUsIHZlcnNpb25fMS5QQUNLQUdFX1ZFUlNJT04sIGNvbmZpZyk7XG4gICAgfVxuICAgIGluaXQoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBuZXcgaW5zdHJ1bWVudGF0aW9uXzEuSW5zdHJ1bWVudGF0aW9uTm9kZU1vZHVsZURlZmluaXRpb24oJ2V4cHJlc3MnLCBbJz49NC4wLjAgPDYnXSwgbW9kdWxlRXhwb3J0cyA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNFeHByZXNzV2l0aFJvdXRlclByb3RvdHlwZSA9IHR5cGVvZiBtb2R1bGVFeHBvcnRzPy5Sb3V0ZXI/LnByb3RvdHlwZT8ucm91dGUgPT09ICdmdW5jdGlvbic7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGVyUHJvdG8gPSBpc0V4cHJlc3NXaXRoUm91dGVyUHJvdG90eXBlXG4gICAgICAgICAgICAgICAgICAgID8gbW9kdWxlRXhwb3J0cy5Sb3V0ZXIucHJvdG90eXBlIC8vIEV4cHJlc3MgdjVcbiAgICAgICAgICAgICAgICAgICAgOiBtb2R1bGVFeHBvcnRzLlJvdXRlcjsgLy8gRXhwcmVzcyB2NFxuICAgICAgICAgICAgICAgIC8vIHBhdGNoIGV4cHJlc3MuUm91dGVyLnJvdXRlXG4gICAgICAgICAgICAgICAgaWYgKCgwLCBpbnN0cnVtZW50YXRpb25fMS5pc1dyYXBwZWQpKHJvdXRlclByb3RvLnJvdXRlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl91bndyYXAocm91dGVyUHJvdG8sICdyb3V0ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl93cmFwKHJvdXRlclByb3RvLCAncm91dGUnLCB0aGlzLl9nZXRSb3V0ZVBhdGNoKCkpO1xuICAgICAgICAgICAgICAgIC8vIHBhdGNoIGV4cHJlc3MuUm91dGVyLnVzZVxuICAgICAgICAgICAgICAgIGlmICgoMCwgaW5zdHJ1bWVudGF0aW9uXzEuaXNXcmFwcGVkKShyb3V0ZXJQcm90by51c2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Vud3JhcChyb3V0ZXJQcm90bywgJ3VzZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgIHRoaXMuX3dyYXAocm91dGVyUHJvdG8sICd1c2UnLCB0aGlzLl9nZXRSb3V0ZXJVc2VQYXRjaCgpKTtcbiAgICAgICAgICAgICAgICAvLyBwYXRjaCBleHByZXNzLkFwcGxpY2F0aW9uLnVzZVxuICAgICAgICAgICAgICAgIGlmICgoMCwgaW5zdHJ1bWVudGF0aW9uXzEuaXNXcmFwcGVkKShtb2R1bGVFeHBvcnRzLmFwcGxpY2F0aW9uLnVzZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdW53cmFwKG1vZHVsZUV4cG9ydHMuYXBwbGljYXRpb24sICd1c2UnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5fd3JhcChtb2R1bGVFeHBvcnRzLmFwcGxpY2F0aW9uLCAndXNlJywgXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICB0aGlzLl9nZXRBcHBVc2VQYXRjaChpc0V4cHJlc3NXaXRoUm91dGVyUHJvdG90eXBlKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vZHVsZUV4cG9ydHM7XG4gICAgICAgICAgICB9LCBtb2R1bGVFeHBvcnRzID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobW9kdWxlRXhwb3J0cyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgY29uc3QgaXNFeHByZXNzV2l0aFJvdXRlclByb3RvdHlwZSA9IHR5cGVvZiBtb2R1bGVFeHBvcnRzPy5Sb3V0ZXI/LnByb3RvdHlwZT8ucm91dGUgPT09ICdmdW5jdGlvbic7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGVyUHJvdG8gPSBpc0V4cHJlc3NXaXRoUm91dGVyUHJvdG90eXBlXG4gICAgICAgICAgICAgICAgICAgID8gbW9kdWxlRXhwb3J0cy5Sb3V0ZXIucHJvdG90eXBlXG4gICAgICAgICAgICAgICAgICAgIDogbW9kdWxlRXhwb3J0cy5Sb3V0ZXI7XG4gICAgICAgICAgICAgICAgdGhpcy5fdW53cmFwKHJvdXRlclByb3RvLCAncm91dGUnKTtcbiAgICAgICAgICAgICAgICB0aGlzLl91bndyYXAocm91dGVyUHJvdG8sICd1c2UnKTtcbiAgICAgICAgICAgICAgICB0aGlzLl91bndyYXAobW9kdWxlRXhwb3J0cy5hcHBsaWNhdGlvbiwgJ3VzZScpO1xuICAgICAgICAgICAgfSksXG4gICAgICAgIF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcGF0Y2ggZm9yIFJvdXRlci5yb3V0ZSBmdW5jdGlvblxuICAgICAqL1xuICAgIF9nZXRSb3V0ZVBhdGNoKCkge1xuICAgICAgICBjb25zdCBpbnN0cnVtZW50YXRpb24gPSB0aGlzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG9yaWdpbmFsKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gcm91dGVfdHJhY2UoLi4uYXJncykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvdXRlID0gb3JpZ2luYWwuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgICAgICAgICAgY29uc3QgbGF5ZXIgPSB0aGlzLnN0YWNrW3RoaXMuc3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgaW5zdHJ1bWVudGF0aW9uLl9hcHBseVBhdGNoKGxheWVyLCAoMCwgdXRpbHNfMS5nZXRMYXllclBhdGgpKGFyZ3MpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcm91dGU7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHBhdGNoIGZvciBSb3V0ZXIudXNlIGZ1bmN0aW9uXG4gICAgICovXG4gICAgX2dldFJvdXRlclVzZVBhdGNoKCkge1xuICAgICAgICBjb25zdCBpbnN0cnVtZW50YXRpb24gPSB0aGlzO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG9yaWdpbmFsKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gdXNlKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZSA9IG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxheWVyID0gdGhpcy5zdGFja1t0aGlzLnN0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgIGluc3RydW1lbnRhdGlvbi5fYXBwbHlQYXRjaChsYXllciwgKDAsIHV0aWxzXzEuZ2V0TGF5ZXJQYXRoKShhcmdzKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvdXRlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwYXRjaCBmb3IgQXBwbGljYXRpb24udXNlIGZ1bmN0aW9uXG4gICAgICovXG4gICAgX2dldEFwcFVzZVBhdGNoKGlzRXhwcmVzc1dpdGhSb3V0ZXJQcm90b3R5cGUpIHtcbiAgICAgICAgY29uc3QgaW5zdHJ1bWVudGF0aW9uID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChvcmlnaW5hbCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHVzZSguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgd2UgYWNjZXNzIGFwcC5yb3V0ZXIgaW4gZXhwcmVzcyA0Lnggd2UgdHJpZ2dlciBhbiBhc3NlcnRpb24gZXJyb3IuXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBwcm9wZXJ0eSBleGlzdGVkIGluIHYzLCB3YXMgcmVtb3ZlZCBpbiB2NCBhbmQgdGhlbiByZS1hZGRlZCBpbiB2NS5cbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZXIgPSBpc0V4cHJlc3NXaXRoUm91dGVyUHJvdG90eXBlXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5yb3V0ZXJcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9yb3V0ZXI7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAocm91dGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxheWVyID0gcm91dGVyLnN0YWNrW3JvdXRlci5zdGFjay5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgaW5zdHJ1bWVudGF0aW9uLl9hcHBseVBhdGNoKGxheWVyLCAoMCwgdXRpbHNfMS5nZXRMYXllclBhdGgpKGFyZ3MpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvdXRlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqIFBhdGNoIGVhY2ggZXhwcmVzcyBsYXllciB0byBjcmVhdGUgc3BhbiBhbmQgcHJvcGFnYXRlIGNvbnRleHQgKi9cbiAgICBfYXBwbHlQYXRjaChsYXllciwgbGF5ZXJQYXRoKSB7XG4gICAgICAgIGNvbnN0IGluc3RydW1lbnRhdGlvbiA9IHRoaXM7XG4gICAgICAgIC8vIGF2b2lkIHBhdGNoaW5nIG11bHRpcGxlIHRpbWVzIHRoZSBzYW1lIGxheWVyXG4gICAgICAgIGlmIChsYXllcltpbnRlcm5hbF90eXBlc18xLmtMYXllclBhdGNoZWRdID09PSB0cnVlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsYXllcltpbnRlcm5hbF90eXBlc18xLmtMYXllclBhdGNoZWRdID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fd3JhcChsYXllciwgJ2hhbmRsZScsIG9yaWdpbmFsID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE86IGluc3RydW1lbnQgZXJyb3IgaGFuZGxlcnNcbiAgICAgICAgICAgIGlmIChvcmlnaW5hbC5sZW5ndGggPT09IDQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsO1xuICAgICAgICAgICAgY29uc3QgcGF0Y2hlZCA9IGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgaXNMYXllclBhdGhTdG9yZWQgfSA9ICgwLCB1dGlsc18xLnN0b3JlTGF5ZXJQYXRoKShyZXEsIGxheWVyUGF0aCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY29uc3RydWN0ZWRSb3V0ZSA9ICgwLCB1dGlsc18xLmdldENvbnN0cnVjdGVkUm91dGUpKHJlcSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYWN0dWFsTWF0Y2hlZFJvdXRlID0gKDAsIHV0aWxzXzEuZ2V0QWN0dWFsTWF0Y2hlZFJvdXRlKShyZXEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSB7XG4gICAgICAgICAgICAgICAgICAgIFtzZW1hbnRpY19jb252ZW50aW9uc18xLkFUVFJfSFRUUF9ST1VURV06IGFjdHVhbE1hdGNoZWRSb3V0ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gKDAsIHV0aWxzXzEuZ2V0TGF5ZXJNZXRhZGF0YSkoY29uc3RydWN0ZWRSb3V0ZSwgbGF5ZXIsIGxheWVyUGF0aCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IG1ldGFkYXRhLmF0dHJpYnV0ZXNbQXR0cmlidXRlTmFtZXNfMS5BdHRyaWJ1dGVOYW1lcy5FWFBSRVNTX1RZUEVdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJwY01ldGFkYXRhID0gKDAsIGNvcmVfMS5nZXRSUENNZXRhZGF0YSkoYXBpXzEuY29udGV4dC5hY3RpdmUoKSk7XG4gICAgICAgICAgICAgICAgaWYgKHJwY01ldGFkYXRhPy50eXBlID09PSBjb3JlXzEuUlBDVHlwZS5IVFRQKSB7XG4gICAgICAgICAgICAgICAgICAgIHJwY01ldGFkYXRhLnJvdXRlID0gYWN0dWFsTWF0Y2hlZFJvdXRlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyB2ZXJpZnkgYWdhaW5zdCB0aGUgY29uZmlnIGlmIHRoZSBsYXllciBzaG91bGQgYmUgaWdub3JlZFxuICAgICAgICAgICAgICAgIGlmICgoMCwgdXRpbHNfMS5pc0xheWVySWdub3JlZCkobWV0YWRhdGEubmFtZSwgdHlwZSwgaW5zdHJ1bWVudGF0aW9uLmdldENvbmZpZygpKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gRXhwcmVzc0xheWVyVHlwZV8xLkV4cHJlc3NMYXllclR5cGUuTUlERExFV0FSRSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxW2ludGVybmFsX3R5cGVzXzEuX0xBWUVSU19TVE9SRV9QUk9QRVJUWV0ucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhcGlfMS50cmFjZS5nZXRTcGFuKGFwaV8xLmNvbnRleHQuYWN0aXZlKCkpID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHNwYW5OYW1lID0gaW5zdHJ1bWVudGF0aW9uLl9nZXRTcGFuTmFtZSh7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3Q6IHJlcSxcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJUeXBlOiB0eXBlLFxuICAgICAgICAgICAgICAgICAgICByb3V0ZTogY29uc3RydWN0ZWRSb3V0ZSxcbiAgICAgICAgICAgICAgICB9LCBtZXRhZGF0YS5uYW1lKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzcGFuID0gaW5zdHJ1bWVudGF0aW9uLnRyYWNlci5zdGFydFNwYW4oc3Bhbk5hbWUsIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogT2JqZWN0LmFzc2lnbihhdHRyaWJ1dGVzLCBtZXRhZGF0YS5hdHRyaWJ1dGVzKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRDb250ZXh0ID0gYXBpXzEuY29udGV4dC5hY3RpdmUoKTtcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudENvbnRleHQgPSBhcGlfMS50cmFjZS5zZXRTcGFuKHBhcmVudENvbnRleHQsIHNwYW4pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgcmVxdWVzdEhvb2sgfSA9IGluc3RydW1lbnRhdGlvbi5nZXRDb25maWcoKTtcbiAgICAgICAgICAgICAgICBpZiAocmVxdWVzdEhvb2spIHtcbiAgICAgICAgICAgICAgICAgICAgKDAsIGluc3RydW1lbnRhdGlvbl8xLnNhZmVFeGVjdXRlSW5UaGVNaWRkbGUpKCgpID0+IHJlcXVlc3RIb29rKHNwYW4sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3Q6IHJlcSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyVHlwZTogdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlOiBjb25zdHJ1Y3RlZFJvdXRlLFxuICAgICAgICAgICAgICAgICAgICB9KSwgZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaV8xLmRpYWcuZXJyb3IoJ2V4cHJlc3MgaW5zdHJ1bWVudGF0aW9uOiByZXF1ZXN0IGhvb2sgZmFpbGVkJywgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgc3Bhbkhhc0VuZGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogRml4IHJvdXRlciBzcGFucyAoZ2V0Um91dGVyUGF0aCBkb2VzIG5vdCB3b3JrIHByb3Blcmx5KSB0b1xuICAgICAgICAgICAgICAgIC8vIGhhdmUgdXNlZnVsIG5hbWVzIGJlZm9yZSByZW1vdmluZyB0aGlzIGJyYW5jaFxuICAgICAgICAgICAgICAgIGlmIChtZXRhZGF0YS5hdHRyaWJ1dGVzW0F0dHJpYnV0ZU5hbWVzXzEuQXR0cmlidXRlTmFtZXMuRVhQUkVTU19UWVBFXSA9PT1cbiAgICAgICAgICAgICAgICAgICAgRXhwcmVzc0xheWVyVHlwZV8xLkV4cHJlc3NMYXllclR5cGUuUk9VVEVSKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5IYXNFbmRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDb250ZXh0ID0gcGFyZW50Q29udGV4dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gbGlzdGVuZXIgZm9yIHJlc3BvbnNlLm9uKCdmaW5pc2gnKVxuICAgICAgICAgICAgICAgIGNvbnN0IG9uUmVzcG9uc2VGaW5pc2ggPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzcGFuSGFzRW5kZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFuSGFzRW5kZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gdmVyaWZ5IHdlIGhhdmUgYSBjYWxsYmFja1xuICAgICAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBBcnJheS5mcm9tKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FsbGJhY2tJZHggPSBhcmdzLmZpbmRJbmRleChhcmcgPT4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJyk7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrSWR4ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzW2NhbGxiYWNrSWR4XSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV4cHJlc3MgY29uc2lkZXJzIGFueXRoaW5nIGJ1dCBhbiBlbXB0eSB2YWx1ZSwgXCJyb3V0ZVwiIG9yIFwicm91dGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhc3NlZCB0byBpdHMgY2FsbGJhY2sgdG8gYmUgYW4gZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1heWJlRXJyb3IgPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0Vycm9yID0gIVt1bmRlZmluZWQsIG51bGwsICdyb3V0ZScsICdyb3V0ZXInXS5pbmNsdWRlcyhtYXliZUVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3Bhbkhhc0VuZGVkICYmIGlzRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBbZXJyb3IsIG1lc3NhZ2VdID0gKDAsIHV0aWxzXzEuYXNFcnJvckFuZE1lc3NhZ2UpKG1heWJlRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4ucmVjb3JkRXhjZXB0aW9uKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuLnNldFN0YXR1cyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IGFwaV8xLlNwYW5TdGF0dXNDb2RlLkVSUk9SLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNwYW5IYXNFbmRlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuSGFzRW5kZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5yZXM/LnJlbW92ZUxpc3RlbmVyKCdmaW5pc2gnLCBvblJlc3BvbnNlRmluaXNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVxLnJvdXRlICYmIGlzRXJyb3IpICYmIGlzTGF5ZXJQYXRoU3RvcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxW2ludGVybmFsX3R5cGVzXzEuX0xBWUVSU19TVE9SRV9QUk9QRVJUWV0ucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWxsYmFjayA9IGFyZ3NbY2FsbGJhY2tJZHhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV8xLmNvbnRleHQuYmluZChwYXJlbnRDb250ZXh0LCBjYWxsYmFjaykuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV8xLmNvbnRleHQuYmluZChjdXJyZW50Q29udGV4dCwgb3JpZ2luYWwpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChhbnlFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBbZXJyb3IsIG1lc3NhZ2VdID0gKDAsIHV0aWxzXzEuYXNFcnJvckFuZE1lc3NhZ2UpKGFueUVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5yZWNvcmRFeGNlcHRpb24oZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNldFN0YXR1cyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBhcGlfMS5TcGFuU3RhdHVzQ29kZS5FUlJPUixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBhbnlFcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBBdCB0aGlzIHBvaW50IGlmIHRoZSBjYWxsYmFjayB3YXNuJ3QgY2FsbGVkLCB0aGF0IG1lYW5zIGVpdGhlciB0aGVcbiAgICAgICAgICAgICAgICAgICAgICogbGF5ZXIgaXMgYXN5bmNocm9ub3VzIChzbyBpdCB3aWxsIGNhbGwgdGhlIGNhbGxiYWNrIGxhdGVyIG9uKSBvciB0aGF0XG4gICAgICAgICAgICAgICAgICAgICAqIHRoZSBsYXllciBkaXJlY3RseSBlbmRzIHRoZSBodHRwIHJlc3BvbnNlLCBzbyB3ZSdsbCBob29rIGludG8gdGhlIFwiZmluaXNoXCJcbiAgICAgICAgICAgICAgICAgICAgICogZXZlbnQgdG8gaGFuZGxlIHRoZSBsYXRlciBjYXNlLlxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzcGFuSGFzRW5kZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5vbmNlKCdmaW5pc2gnLCBvblJlc3BvbnNlRmluaXNoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBgaGFuZGxlYCBpc24ndCBqdXN0IGEgcmVndWxhciBmdW5jdGlvbiBpbiBzb21lIGNhc2VzLiBJdCBhbHNvIGNvbnRhaW5zXG4gICAgICAgICAgICAvLyBzb21lIHByb3BlcnRpZXMgaG9sZGluZyBtZXRhZGF0YSBhbmQgc3RhdGUgc28gd2UgbmVlZCB0byBwcm94eSB0aGVtXG4gICAgICAgICAgICAvLyB0aHJvdWdoIHRocm91Z2ggcGF0Y2hlZCBmdW5jdGlvblxuICAgICAgICAgICAgLy8gcmVmOiBodHRwczovL2dpdGh1Yi5jb20vb3Blbi10ZWxlbWV0cnkvb3BlbnRlbGVtZXRyeS1qcy1jb250cmliL2lzc3Vlcy8xOTUwXG4gICAgICAgICAgICAvLyBBbHNvIHNvbWUgYXBwcy9saWJzIGRvIHRoZWlyIG93biBwYXRjaGluZyBiZWZvcmUgT1RFTCBhbmQgaGF2ZSB0aGVzZSBwcm9wZXJ0aWVzXG4gICAgICAgICAgICAvLyBpbiB0aGUgcHJvcHRvdHlwZS4gU28gd2UgdXNlIGEgYGZvci4uLmluYCBsb29wIHRvIGdldCBvd24gcHJvcGVydGllcyBhbmQgYWxzb1xuICAgICAgICAgICAgLy8gYW55IGVudW1lcmFibGUgcHJvcCBpbiB0aGUgcHJvdG90eXBlIGNoYWluXG4gICAgICAgICAgICAvLyByZWY6IGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuLXRlbGVtZXRyeS9vcGVudGVsZW1ldHJ5LWpzLWNvbnRyaWIvaXNzdWVzLzIyNzFcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9yaWdpbmFsKSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBhdGNoZWQsIGtleSwge1xuICAgICAgICAgICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGF0Y2hlZDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9nZXRTcGFuTmFtZShpbmZvLCBkZWZhdWx0TmFtZSkge1xuICAgICAgICBjb25zdCB7IHNwYW5OYW1lSG9vayB9ID0gdGhpcy5nZXRDb25maWcoKTtcbiAgICAgICAgaWYgKCEoc3Bhbk5hbWVIb29rIGluc3RhbmNlb2YgRnVuY3Rpb24pKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdE5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBzcGFuTmFtZUhvb2soaW5mbywgZGVmYXVsdE5hbWUpID8/IGRlZmF1bHROYW1lO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGFwaV8xLmRpYWcuZXJyb3IoJ2V4cHJlc3MgaW5zdHJ1bWVudGF0aW9uOiBlcnJvciBjYWxsaW5nIHNwYW4gbmFtZSByZXdyaXRlIGhvb2snLCBlcnIpO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHROYW1lO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5FeHByZXNzSW5zdHJ1bWVudGF0aW9uID0gRXhwcmVzc0luc3RydW1lbnRhdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluc3RydW1lbnRhdGlvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@opentelemetry+instrumentation-express@0.57.0_@opentelemetry+api@1.9.0/node_modules/@opentelemetry/instrumentation-express/build/src/instrumentation.js\n");

/***/ })

};
;