# Environment Variables Setup Guide

## Structure

### `.env`
- **용도**: 모든 환경의 기본값 (stage API)
- **커밋**: ✅ Git에 포함
- **사용**: PR, Preview, main 브랜치 배포

### `.env.production`
- **용도**: Production API (릴리즈 전용)
- **커밋**: ✅ Git에 포함
- **사용**: 수동 릴리즈 워크플로우에서만 사용

### `.env.local` (권장)
- **용도**: 로컬 개발 환경별 설정
- **커밋**: ❌ Git에서 제외 (.gitignore)
- **사용**: 개발자별 로컬 설정 (포트, 로컬 API 등)

## Deployment Flow

### 1. PR/Preview (자동)
- Vercel Integration 사용
- `.env` 기본값 사용 (stage API)

### 2. Main 브랜치 머지 (자동)
- Vercel Integration 사용
- `.env` 기본값 사용 (stage API)

### 3. 릴리즈 (수동)
- GitHub Actions의 release.yml 워크플로우
- `--build-env` 플래그로 production API 주입
- `.env.production`의 값들을 명시적으로 주입

## Best Practices

1. **민감 정보는 환경 변수에 넣지 않기**
   - `NEXT_PUBLIC_*` 접두사는 클라이언트에 노출됨
   - API 키 등은 서버 사이드에서만 사용

2. **로컬 개발 시 `.env.local` 사용**
   ```bash
   # .env.local (gitignore됨)
   NEXT_PUBLIC_WEB_URL=http://localhost:3000
   NEXT_PUBLIC_API_SERVER_URL=http://localhost:8080
   ```

3. **환경별 우선순위 이해**
   - Vercel CLI `--build-env` > `.env.production` > `.env.local` > `.env`

4. **Vercel 대시보드 환경 변수는 사용하지 않음**
   - 파일 기반 관리로 투명성 확보
   - release.yml의 `--build-env`로 production 값 명시적 주입
