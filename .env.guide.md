# Environment Variables Setup Guide

## Structure

### `.env`
- **용도**: 모든 환경의 공통 설정
- **커밋**: ✅ Git에 포함
- **내용**: 공통 값만 (CURRENT_TERM, IMAGE_URL, GOOGLE_MAPS_KEY 등)

### `.env.development`
- **용도**: 로컬 개발 환경 (`npm run dev`)
- **커밋**: ✅ Git에 포함
- **내용**: localhost:3000, stage API, 로컬스토리지 로그인

### `.env.preview`
- **용도**: Vercel Preview 배포 (PR)
- **커밋**: ✅ Git에 포함
- **내용**: stage 도메인, stage API, 쿠키 로그인

### `.env.production`
- **용도**: Production 배포
- **커밋**: ✅ Git에 포함
- **내용**: production 도메인, production API, 쿠키 로그인

### `.env.local` (권장)
- **용도**: 개발자별 로컬 설정
- **커밋**: ❌ Git에서 제외 (.gitignore)
- **내용**: 로컬 API 서버, 개인 테스트 키 등

## Deployment Flow

### 1. 로컬 개발 (`npm run dev`)
- `.env.development` 사용
- localhost:3000, stage API

### 2. PR/Preview (Vercel Integration)
- `.env.preview` 사용
- stage 도메인, stage API

### 3. Main 브랜치 머지 (Vercel Integration)
- `.env.production` 사용
- production 도메인, production API

### 4. 수동 릴리즈 (release.yml)
- `--build-env` 플래그로 production API 명시적 주입
- GitHub Release 태그 생성

## Best Practices

1. **환경별 파일 분리**
   - 각 환경의 설정을 명확히 분리
   - 공통 설정은 `.env`에만

2. **로컬 개발 시 `.env.local` 활용**
   ```bash
   # .env.local (gitignore됨)
   NEXT_PUBLIC_API_SERVER_URL=http://localhost:8080
   ```

3. **환경별 우선순위 이해**
   - `.env.[mode].local` > `.env.[mode]` > `.env.local` > `.env`
   - Vercel CLI `--build-env`는 모든 파일보다 우선
